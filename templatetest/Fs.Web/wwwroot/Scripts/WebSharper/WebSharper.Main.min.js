(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM;b=a.WebSharper=a.WebSharper||{};c=b.JavaScript=b.JavaScript||{};d=c.JS=c.JS||{};e=a.Error;f=c.NonStandardPromiseRejectionException=c.NonStandardPromiseRejectionException||{};g=c.Promise=c.Promise||{};h=c.Pervasives=c.Pervasives||{};i=b.Json=b.Json||{};j=b.Obj=b.Obj||{};k=b.Remoting=b.Remoting||{};l=k.XhrProvider=k.XhrProvider||{};m=k.AjaxRemotingProvider=k.AjaxRemotingProvider||{};n=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};o=b.HtmlContentExtensions=b.HtmlContentExtensions||{};p=o.SingleNode=o.SingleNode||{};q=o.IControlBody=o.IControlBody||{};r=b.Activator=b.Activator||{};s=a.StartupCode$WebSharper_Main$Html=a.StartupCode$WebSharper_Main$Html||{};t=b.Collections=b.Collections||{};u=t.EqualityComparer=t.EqualityComparer||{};v=b.Comparers=b.Comparers||{};w=v.EquatableEqualityComparer=v.EquatableEqualityComparer||{};x=v.BaseEqualityComparer=v.BaseEqualityComparer||{};y=t.Comparer=t.Comparer||{};z=v.ComparableComparer=v.ComparableComparer||{};A=v.BaseComparer=v.BaseComparer||{};B=b.Operators=b.Operators||{};C=b.Nullable=b.Nullable||{};D=b.Utils=b.Utils||{};E=b.Concurrency=b.Concurrency||{};F=E.CT=E.CT||{};G=E.AsyncBody=E.AsyncBody||{};H=E.Scheduler=E.Scheduler||{};I=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};J=b.Enumerator=b.Enumerator||{};K=J.T=J.T||{};L=c.Optional=c.Optional||{};M=b.Arrays=b.Arrays||{};N=b.Seq=b.Seq||{};O=b.List=b.List||{};P=b.Arrays2D=b.Arrays2D||{};Q=b.CancellationTokenSource=b.CancellationTokenSource||{};R=b.BigIntProxyHelpers=b.BigIntProxyHelpers||{};S=b.Char=b.Char||{};T=b.Util=b.Util||{};U=b.DateUtil=b.DateUtil||{};V=b.DateTimeOffset=b.DateTimeOffset||{};W=b.Delegate=b.Delegate||{};X=t.DictionaryUtil=t.DictionaryUtil||{};Y=t.KeyCollection=t.KeyCollection||{};Z=t.ValueCollection=t.ValueCollection||{};_0=t.Dictionary=t.Dictionary||{};_1=b.Exception=b.Exception||{};_2=b.MatchFailureException=b.MatchFailureException||{};_3=b.IndexOutOfRangeException=b.IndexOutOfRangeException||{};_4=b.OperationCanceledException=b.OperationCanceledException||{};_5=b.ArgumentException=b.ArgumentException||{};_6=b.ArgumentOutOfRangeException=b.ArgumentOutOfRangeException||{};_7=b.ArgumentNullException=b.ArgumentNullException||{};_8=b.InvalidOperationException=b.InvalidOperationException||{};_9=b.AggregateException=b.AggregateException||{};_=b.TimeoutException=b.TimeoutException||{};$=b.FormatException=b.FormatException||{};ba=b.OverflowException=b.OverflowException||{};bb=b.TaskCanceledException=b.TaskCanceledException||{};bc=b.KeyNotFoundException=b.KeyNotFoundException||{};bd=a.System=a.System||{};be=bd.Guid=bd.Guid||{};bf=t.HashSetUtil=t.HashSetUtil||{};bg=t.HashSet=t.HashSet||{};bh=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bi=bh.LazyRecord=bh.LazyRecord||{};bj=b.Lazy=b.Lazy||{};bk=O.T=O.T||{};bl=b.Slice=b.Slice||{};bm=b.Option=b.Option||{};bn=b.Queue=b.Queue||{};bo=b.Random=b.Random||{};bp=b.Ref=b.Ref||{};bq=b.Result=b.Result||{};br=b.Control=b.Control||{};bs=b.Stack=b.Stack||{};bt=b.Strings=b.Strings||{};bu=b.Task=b.Task||{};bv=b.Task1=b.Task1||{};bw=b.TaskCompletionSource=b.TaskCompletionSource||{};bx=b.TaskBuilderBase=b.TaskBuilderBase||{};by=b.TaskBuilder=b.TaskBuilder||{};bz=b.Unchecked=b.Unchecked||{};bA=a.Microsoft=a.Microsoft||{};bB=bA.FSharp=bA.FSharp||{};bC=bB.Core=bB.Core||{};bD=bC.FSharpValueOption=bC.FSharpValueOption||{};bE=b.ValueOption=b.ValueOption||{};bF=b.Numeric=b.Numeric||{};bG=b&&b.Runtime;bH=a.Promise;bI=a.JSON;bJ=a.String;bK=a.Date;bL=a.console;bM=a.Math;d.GetFieldValues=function(bN){var bO,bP;bO=[];for(var bQ in bN)bO.push(bN[bQ]);return bO;};d.GetFieldNames=function(bN){var bO,bP;bO=[];for(var bQ in bN)bO.push(bQ);return bO;};d.GetFields=function(bN){var bO,bP;bO=[];for(var bQ in bN)bO.push([bQ,bN[bQ]]);return bO;};f=c.NonStandardPromiseRejectionException=bG.Class({get_Reason:function(){return this.reason;}},e,f);f.New=bG.Ctor(function(bN){this.message="Promise rejected";a.Object.setPrototypeOf(this,f.prototype);this.reason=bN;},f);g.For=function(bN,bO){var bP;function bQ(){return bP.MoveNext()?bO(bP.Current()).then(function(){return bQ();}):bH.resolve(null);}bP=J.Get(bN);return new bH(function(bR){bQ();bR();})["finally"](function(){return bP.Dispose();});};g.AsTask=function(bN){var bO;bO=new bw.New();bN.then(function(bP){return bO.SetResult(bP);},function(bP){return bO.SetException$1(g.unwrapExn(bP));});return bO.get_Task();};g.AsAsync=function(bN){return E.FromContinuations(function(bO,bP){bN.then(bO,function(bQ){return bP(g.unwrapExn(bQ));});});};g.OfTask=function(bN){return new bH(function(bO,bP){bN.ContinueWith$1(function(bQ){return bQ.get_IsCanceled()?bP(new bb.New()):bQ.get_IsFaulted()?bP(bQ.get_Exception()):bO(bQ.get_Result());},E.noneCT());});};g.OfAsync=function(bN){return new bH(function(bO,bP){E.StartWithContinuations(bN,bO,function(bQ){bP(bQ);},function(bQ){bP(bQ);},null);});};g.unwrapExn=function(bN){return bN instanceof e?bN:new f.New(bN);};h.GetJS=function(bN,bO){var bP,bQ;bP=bN;bQ=J.Get(bO);try{while(bQ.MoveNext())bP=bP[bQ.Current()];}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}return bP;};h.NewFromSeq=function(bN){var bO,bP,bQ;bO={};bP=J.Get(bN);try{while(bP.MoveNext()){bQ=bP.Current();bO[bQ[0]]=bQ[1];}}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}return bO;};i.Activate=function(bN){var bO,bQ,bR,bS,bT,bU,bV;function bP(bW){var bX,bY,bZ,b0,b1;if(bz.Equals(bW,null))return bW;else if(typeof bW=="object"){if(bW instanceof a.Array)return i.shallowMap(bP,bW);else{bX=i.shallowMap(bP,bW.$V);bY=bW.$T;if(bY===void 0)return bX;else{bZ=M.get(bQ,bY);if(bZ===1)return O.ofArray(bX);else if(bZ===2)return self.WebSharper.Decimal.CreateDecimalBits(bX);else{b0=new(M.get(bQ,bY))();for(var b2 in bX)if(function(b3){b0[b3]=bX[b3];return false;}(b2))break;return b0;}}}}else return bW;}bQ=bN?bN.$TYPES:void 0;if(bQ===void 0)bO=bN;else{for(bR=0,bS=M.length(bQ)-1;bR<=bS;bR++){bV=M.get(bQ,bR);switch(!bz.Equals(bV,null)&&bV.length===3?M.get(bV,0)==="WebSharper"?M.get(bV,1)==="List"?M.get(bV,2)==="T"?0:(bU=bV,2):(bU=bV,2):(bU=bV,2):!bz.Equals(bV,null)&&bV.length===2?M.get(bV,0)==="WebSharper"?M.get(bV,1)==="Decimal"?1:(bU=bV,2):(bU=bV,2):(bU=bV,2)){case 0:bT=1;break;case 1:bT=2;break;case 2:bT=i.lookup(bU);break;}M.set(bQ,bR,bT);}bO=bN.$DATA;}return bP(bO);};i.shallowMap=function(bN,bO){var bP,bQ;if(bO instanceof a.Array)return M.map(bN,bO);else if(typeof bO=="object"){bP={};for(var bR in bO)if(function(bS){bP[bS]=bN(bO[bS]);return false;}(bR))break;return bP;}else return bO;};i.lookup=function(bN){var bO,bP,bQ,bR,bS;bQ=M.length(bN);bO=self;bP=0;while(bP<bQ){bR=M.get(bN,bP);bS=bO[bR];if(!bz.Equals(typeof bS,void 0)){bO=bS;bP=bP+1;}else B.FailWith("Invalid server reply. Failed to find type: "+bR);}return bO;};j=b.Obj=bG.Class({Equals:function(bN){return this===bN;},GetHashCode:function(){return -1;}},null,j);j.New=bG.Ctor(function(){},j);l=k.XhrProvider=bG.Class({Sync:function(bN,bO,bP){var bQ;bQ=[null];k.ajax(false,bN,bO,bP,function(bR){bQ[0]=bR;},function(bR){throw bR;},function(){k.ajax(false,bN,bO,bP,function(bR){bQ[0]=bR;},function(bR){throw bR;},void 0);});return bQ[0];},Async:function(bN,bO,bP,bQ,bR){k.ajax(true,bN,bO,bP,bQ,bR,function(){k.ajax(true,bN,bO,bP,bQ,bR,void 0);});}},j,l);l.New=bG.Ctor(function(){j.New.call(this);},l);m=k.AjaxRemotingProvider=bG.Class({get_EndPoint:function(){return k.EndPoint();},AsyncBase:function(bN,bO){var bP,bQ;bP=this;bQ=null;return E.Delay(function(){var bR,bS;bR=k.makeHeaders(bN);bS=k.makePayload(bO);return E.Bind(E.GetCT(),function(bT){return E.FromContinuations(function(bU,bV,bW){var bX,bY,bZ;function b0(b1){return bX[0]?(bX[0]=false,bW(new _4.New(bT))):null;}bX=[true];bY=E.Register(bT,function(){b0();});bZ=bP.get_EndPoint();return k.AjaxProvider().Async(bZ,bR,bS,function(b1){if(bX[0]){bX[0]=false;bY.Dispose();bU(i.Activate(bI.parse(b1)));}},function(b1){if(bX[0]){bX[0]=false;bY.Dispose();bV(b1);}});});});});},Send:function(bN,bO){E.Start(this.AsyncBase(bN,bO),null);},Task:function(bN,bO){return E.StartAsTask(this.AsyncBase(bN,bO),null);},Async:function(bN,bO){return this.AsyncBase(bN,bO);},Sync:function(bN,bO){var bP,bQ,bR;return i.Activate(bI.parse((bP=this.get_EndPoint(),(bQ=k.makeHeaders(bN),(bR=k.makePayload(bO),k.AjaxProvider().Sync(bP,bQ,bR))))));}},j,m);m.New=bG.Ctor(function(){j.New.call(this);},m);k.ajax=function(bN,bO,bP,bQ,bR,bS,bT){var bU,bV,bW;bU=new a.XMLHttpRequest();bV=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");bU.open("POST",bO,bN);if(bN==true)bU.withCredentials=true;for(var bY in bP)bU.setRequestHeader(bY,bP[bY]);if(bV)bU.setRequestHeader("x-csrftoken",bV);function bX(){var bZ;if(bU.status==200)bR(bU.responseText);else if(bT&&bU.status==403&&bU.responseText=="CSRF")bT();else{bZ="Response status is not 200: ";bS(new e(bZ+bU.status));}}if("onload"in bU)bU.onload=bU.onerror=bU.onabort=bX;else bU.onreadystatechange=function(){if(bU.readyState==4)bX();};bU.send(bQ);};k.makePayload=function(bN){return bI.stringify(bN);};k.makeHeaders=function(bN){return{"content-type":"application/json","x-websharper-rpc":bN};};k.AjaxProvider=function(){n.$cctor();return n.AjaxProvider;};k.set_AjaxProvider=function(bN){n.$cctor();n.AjaxProvider=bN;};k.UseHttps=function(){try{return!bt.StartsWith(self.location.href,"https://")&&(k.set_EndPoint(bt.Replace(self.location.href,"http://","https://")),true);}catch(bN){return false;}};k.EndPoint=function(){n.$cctor();return n.EndPoint;};k.set_EndPoint=function(bN){n.$cctor();n.EndPoint=bN;};n.$cctor=function(){n.$cctor=a.ignore;n.EndPoint="?";n.AjaxProvider=new l.New();};p=o.SingleNode=bG.Class({ReplaceInDom:function(bN){this.node.parentNode.replaceChild(this.node,bN);}},j,p);p.New=bG.Ctor(function(bN){j.New.call(this);this.node=bN;},p);q.SingleNode=function(bN){return new p.New(bN);};r.Activate=function(){var bN;if(self.document){bN=self.document.getElementById("websharper-data");if(bN)r.onReady(function(){var bO,bP;function bQ(bT,bU){if(typeof bU=="object"&&"$init"in bU)bU.$preinit(bT);}function bR(bT,bU){if(typeof bU=="object"&&"Body"in bU)bU.Body().ReplaceInDom(self.document.getElementById(bT));else if(typeof bU=="object"&&"$init"in bU)bU.$init(bT);}function bS(bT,bU){if(typeof bU=="object"&&"$init"in bU)bU.$postinit(bT);}bO=i.Activate(bI.parse(bN.getAttribute("content")));r.set_Instances(bO);bP=d.GetFields(bO);M.iter(function(bT){return bQ(bT[0],bT[1]);},bP);M.iter(function(bT){return bR(bT[0],bT[1]);},bP);M.iter(function(bT){return bS(bT[0],bT[1]);},bP);});}};r.onReady=function(bN){var bO;function bP(){if(!bO){bO=true;bN();self.document.removeEventListener("DOMContentLoaded",bP,false);self.removeEventListener("load",bP,false);}}bO=false;if(self.document.readyState==="complete")bP();else{self.document.addEventListener("DOMContentLoaded",bP,false);self.addEventListener("load",bP,false);}};r.Instances=function(){s.$cctor();return s.Instances;};r.set_Instances=function(bN){s.$cctor();s.Instances=bN;};r.META_ID=function(){s.$cctor();return s.META_ID;};s.$cctor=function(){s.$cctor=a.ignore;s.META_ID="websharper-data";s.Instances=null;};u=t.EqualityComparer=bG.Class({CGetHashCode0:function(bN){return this.GetHashCode$1(bN);},CEquals0:function(bN,bO){return this.Equals$1(bN,bO);},CGetHashCode:function(bN){return this.GetHashCode$1(bN);},CEquals:function(bN,bO){return this.Equals$1(bN,bO);}},j,u);u.New=bG.Ctor(function(){j.New.call(this);},u);w=v.EquatableEqualityComparer=bG.Class({GetHashCode$1:function(bN){return bz.Hash(bN);},Equals$1:function(bN,bO){return bN.EEquals(bO);}},u,w);w.New=bG.Ctor(function(){u.New.call(this);},w);x=v.BaseEqualityComparer=bG.Class({GetHashCode$1:function(bN){return bz.Hash(bN);},Equals$1:function(bN,bO){return bz.Equals(bN,bO);}},u,x);x.New=bG.Ctor(function(){u.New.call(this);},x);y=t.Comparer=bG.Class({Compare0:function(bN,bO){return this.Compare$1(bN,bO);},Compare:function(bN,bO){return this.Compare$1(bN,bO);}},j,y);y.New=bG.Ctor(function(){j.New.call(this);},y);z=v.ComparableComparer=bG.Class({Compare$1:function(bN,bO){return bN.CompareTo(bO);}},y,z);z.New=bG.Ctor(function(){y.New.call(this);},z);A=v.BaseComparer=bG.Class({Compare$1:function(bN,bO){return bz.Compare(bN,bO);}},y,A);A.New=bG.Ctor(function(){y.New.call(this);},A);B.charRange=function(bN,bO){var bP,bQ;bP=bN.charCodeAt();bQ=1+bO.charCodeAt()-bP;return bQ<=0?[]:N.init(bQ,function(bR){return bJ.fromCharCode(bR+bP);});};C.op=function(bN,bO,bP){return bN==null||bO==null?null:bP(bN,bO);};C.opL=function(bN,bO,bP){return bN==null?null:bP(bN,bO);};C.opR=function(bN,bO,bP){return bO==null?null:bP(bN,bO);};C.cmp=function(bN,bO,bP){return bN==null||bO==null?false:bP(bN,bO);};C.cmpE=function(bN,bO,bP){return bN==null?bO==null:bO==null?false:bP(bN,bO);};C.cmpL=function(bN,bO,bP){return bN==null?false:bP(bN,bO);};C.cmpR=function(bN,bO,bP){return bO==null?false:bP(bN,bO);};C.conv=function(bN,bO){return bN==null?null:bO(bN);};D.spaceForPosSignAdjusted=function(bN){return" "+bN;};D.plusForPosSignAdjusted=function(bN){return"+"+bN;};D.adjustSigned=function(bN,bO){return bN<0?bO===32?bN+(1<<16)*(1<<16):bN+(1<<bO):bN;};D.prettyPrint=function(bN){var bO,bP;function bQ(bR,bS){return bR+" = "+D.prettyPrint(bS);}return bN===null?"null":(bO=typeof bN,bO=="string"?"\""+bN+"\"":bO=="object"?bN instanceof a.Array?"[|"+bt.concat("; ",M.map(D.prettyPrint,bN))+"|]":(bP=bJ(bN),bP==="[object Object]"?"{"+bt.concat("; ",M.map(function(bR){return bQ(bR[0],bR[1]);},d.GetFields(bN)))+"}":bP):bJ(bN));};D.printArray2D=function(bN,bO){return bO===null?"null":"[["+bt.concat("][",N.delay(function(){var bP;bP=bO.length?bO[0].length:0;return N.map(function(bQ){return bt.concat("; ",N.delay(function(){return N.map(function(bR){return bN(M.get2D(bO,bQ,bR));},B.range(0,bP-1));}));},B.range(0,bO.length-1));}))+"]]";};D.printArray=function(bN,bO){return bO===null?"null":"[|"+bt.concat("; ",M.map(bN,bO))+"|]";};D.printList=function(bN,bO){return"["+bt.concat("; ",N.map(bN,bO))+"]";};D.padNumLeft=function(bN,bO){var bP;bP=M.get(bN,0);return bP===" "||bP==="+"||bP==="-"?bP+bt.PadLeftWith(bN.substr(1),bO-1,"0"):bt.PadLeftWith(bN,bO,"0");};D.spaceForPos=function(bN,bO){return 0<=bN?" "+bO:bO;};D.plusForPos=function(bN,bO){return 0<=bN?"+"+bO:bO;};D.toSafe=function(bN){return bN==null?"":bN;};F.New=function(bN,bO){return{c:bN,r:bO};};G.New=function(bN,bO){return{k:bN,ct:bO};};H=E.Scheduler=bG.Class({tick:function(){var bN,bO,bP;bO=this;bP=bK.now();bN=true;while(bN)if(this.robin.length===0){this.idle=true;bN=false;}else{(this.robin.shift())();bK.now()-bP>40?(a.setTimeout(function(){bO.tick();},0),bN=false):void 0;}},Fork:function(bN){var bO;bO=this;this.robin.push(bN);if(this.idle){this.idle=false;a.setTimeout(function(){bO.tick();},0);}}},j,H);H.New=bG.Ctor(function(){j.New.call(this);this.idle=true;this.robin=[];},H);E.For=function(bN,bO){return E.Using(J.Get(bN),function(bP){return E.While(function(){return bP.MoveNext();},E.Delay(function(){return bO(bP.Current());}));});};E.While=function(bN,bO){return bN()?E.Bind(bO,function(){return E.While(bN,bO);}):E.Return();};E.Using=function(bN,bO){return E.TryFinally(bO(bN),function(){bN.Dispose();});};E.TryCancelled=function(bN,bO){return function(bP){bN(G.New(function(bQ){if(bQ.$==2){bO(bQ.$0);bP.k(bQ);}else bP.k(bQ);},bP.ct));};};E.OnCancel=function(bN){return function(bO){bO.k({$:0,$0:E.Register(bO.ct,bN)});};};E.StartChildAsTask=function(bN){return function(bO){(E.StartChild(bN,null))(G.New(function(bP){if(bP.$==0)bO.k({$:0,$0:E.StartImmediateAsTask(bP.$0,{$:1,$0:bO.ct})});},bO.ct));};};E.StartChild=function(bN,bO){return function(bP){var bQ,bR,bS,bT;bQ=[true];bR=[null];bS=[];bT=bO!=null&&bO.$==1?{$:1,$0:a.setTimeout(function(){var bU;bQ[0]=false;bU={$:1,$0:new _.New()};while(bS.length>0)(bS.shift())(bU);},bO.$0)}:null;E.scheduler().Fork(function(){if(!bP.ct.c)bN(G.New(function(bU){if(bQ[0]){bR[0]={$:1,$0:bU};if(bT!=null&&bT.$==1)a.clearTimeout(bT.$0);while(bS.length>0)(bS.shift())(bU);}},bP.ct));});bP.k({$:0,$0:function(bU){var bV;if(bQ[0]){bV=bR[0];if(bV==null)bS.push(bU.k);else bU.k(bV.$0);}else bU.k({$:1,$0:new _.New()});}});};};E.Sequential=function(bN){var bO;bO=M.ofSeq(bN);return M.length(bO)===0?E.Return([]):function(bP){var bQ,bR;function bS(bU){var bV;while(true){bV=function(bW){return function(){(M.get(bO,bW))(G.New(function(bX){return bT(bW,bX);},bP.ct));};}(bU);return E.scheduler().Fork(bV);}}function bT(bU,bV){return bV.$==0?(M.set(bR,bU,bV.$0),bU===bQ-1?bP.k({$:0,$0:bR}):bP.ct.c?E.cancel(bP):bS(bU+1)):bP.k(bV);}bQ=bO.length;bR=new a.Array(bQ);bS(0);};};E.ParallelWithMaxDegree=function(bN,bO){var bP;if(bO<=0)B.InvalidArg("maxDegreeOfParallelism","maxDegreeOfParallelism must be positive, was "+bJ(bO));bP=M.ofSeq(bN);return M.length(bP)===0?E.Return([]):function(bQ){var bT,bU,bV,bW,bX;function bR(bY){E.scheduler().Fork(function(){(M.get(bP,bY))(G.New(bS(bY),bQ.ct));});}function bS(bY){return function(bZ){var b0,b1,b2;b1=bU[0];switch(b1===0?0:b1===1?bZ.$==0?1:(b0=[b1,bZ],3):bZ.$==0?2:(b0=[b1,bZ],3)){case 0:return null;case 1:M.set(bV,bY,bZ.$0);bU[0]=0;return bQ.k({$:0,$0:bV});case 2:return bQ.ct.c?(bU[0]=0,E.cancel(bQ)):(M.set(bV,bY,bZ.$0),bU[0]=b1-1,b2=bT-b1+bO,b2<bT?bR(b2):null);case 3:bU[0]=0;return bQ.k(b0[1]);}};}bT=bP.length;bU=[bT];bV=new a.Array(bT);for(bW=0,bX=(bz.Compare(bO,bT)===-1?bO:bT)-1;bW<=bX;bW++)bR(bW);};};E.Parallel=function(bN){var bO;bO=M.ofSeq(bN);return M.length(bO)===0?E.Return([]):function(bP){var bR,bS,bT,bU,bV;function bQ(bW,bX){var bY,bZ;bZ=bS[0];switch(bZ===0?0:bZ===1?bX.$==0?1:(bY=bX,3):bX.$==0?2:(bY=bX,3)){case 0:return null;case 1:M.set(bT,bW,bX.$0);bS[0]=0;return bP.k({$:0,$0:bT});case 2:M.set(bT,bW,bX.$0);{bS[0]=bZ-1;return;}break;case 3:bS[0]=0;return bP.k(bY);}}bR=bO.length;bS=[bR];bT=new a.Array(bR);for(bU=0,bV=bR-1;bU<=bV;bU++)(function(bW){return E.scheduler().Fork(function(){(M.get(bO,bW))(G.New(function(bX){return bQ(bW,bX);},bP.ct));});}(bU));};};E.Sleep=function(bN){return function(bO){var bP,bQ;bP=void 0;bQ=void 0;bP=a.setTimeout(function(){bQ.Dispose();E.scheduler().Fork(function(){bO.k({$:0,$0:null});});},bN);bQ=E.Register(bO.ct,function(){a.clearTimeout(bP);E.scheduler().Fork(function(){E.cancel(bO);});});};};E.StartImmediateAsTask=function(bN,bO){var bP;bP=new bw.New();E.StartWithContinuations(bN,function(bQ){bP.SetResult(bQ);},function(bQ){bP.SetException$1(bQ);},function(){bP.SetCanceled();},bO);return bP.get_Task();};E.StartAsTask=function(bN,bO){var bP;bP=new bw.New();E.scheduler().Fork(function(){E.StartWithContinuations(bN,function(bQ){bP.SetResult(bQ);},function(bQ){bP.SetException$1(bQ);},function(){bP.SetCanceled();},bO);});return bP.get_Task();};E.AwaitTask1=function(bN){return E.FromContinuations(function(bO,bP,bQ){bz.Equals(bN.get_Status(),0)?bN.Start():void 0;bN.ContinueWith$1(function(bR){return bR.get_IsCanceled()?bQ(new _4.New(E.noneCT())):bR.get_IsFaulted()?bP(bR.get_Exception()):bO(bR.get_Result());},E.noneCT());});};E.AwaitTask=function(bN){return E.FromContinuations(function(bO,bP,bQ){bz.Equals(bN.get_Status(),0)?bN.Start():void 0;bN.ContinueWith$1(function(bR){return bR.get_IsCanceled()?bQ(new _4.New(E.noneCT())):bR.get_IsFaulted()?bP(bR.get_Exception()):bO();},E.noneCT());});};E.AwaitEvent=function(bN,bO){return function(bP){var bQ,bR;bQ=void 0;bR=void 0;bQ=bN.Subscribe(T.observer(function(bS){bQ.Dispose();bR.Dispose();E.scheduler().Fork(function(){bP.k({$:0,$0:bS});});}));bR=E.Register(bP.ct,function(){if(bO!=null&&bO.$==1)bO.$0();else{bQ.Dispose();E.scheduler().Fork(function(){E.cancel(bP);});}});};};E.StartImmediate=function(bN,bO){var bP,bQ;bP=(bQ=(E.defCTS())[0],bO==null?bQ:bO.$0);if(!bP.c)bN(G.New(function(bR){if(bR.$==1)E.UncaughtAsyncError(bR.$0);},bP));};E.Start=function(bN,bO){var bP,bQ;bP=(bQ=(E.defCTS())[0],bO==null?bQ:bO.$0);E.scheduler().Fork(function(){if(!bP.c)bN(G.New(function(bR){if(bR.$==1)E.UncaughtAsyncError(bR.$0);},bP));});};E.UncaughtAsyncError=function(bN){bL.log("WebSharper: Uncaught asynchronous exception",bN);};E.StartWithContinuations=function(bN,bO,bP,bQ,bR){var bS,bT;bS=(bT=(E.defCTS())[0],bR==null?bT:bR.$0);if(!bS.c)bN(G.New(function(bU){if(bU.$==1)bP(bU.$0);else if(bU.$==2)bQ(bU.$0);else bO(bU.$0);},bS));};E.FromContinuations=function(bN){return function(bO){var bP;function bQ(bR){if(bP[0])B.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bP[0]=true;E.scheduler().Fork(bR);}}bP=[false];bN(function(bR){bQ(function(){bO.k({$:0,$0:bR});});},function(bR){bQ(function(){bO.k({$:1,$0:bR});});},function(bR){bQ(function(){bO.k({$:2,$0:bR});});});};};E.GetCT=function(){I.$cctor();return I.GetCT;};E.Catch=function(bN){return function(bO){try{bN(G.New(function(bP){if(bP.$==0)bO.k({$:0,$0:{$:0,$0:bP.$0}});else if(bP.$==1)bO.k({$:0,$0:{$:1,$0:bP.$0}});else bO.k(bP);},bO.ct));}catch(bP){bO.k({$:0,$0:{$:1,$0:bP}});}};};E.TryWith=function(bN,bO){return function(bP){bN(G.New(function(bQ){if(bQ.$==0)bP.k({$:0,$0:bQ.$0});else if(bQ.$==1)try{(bO(bQ.$0))(bP);}catch(bR){bP.k(bQ);}else bP.k(bQ);},bP.ct));};};E.TryFinally=function(bN,bO){return function(bP){bN(G.New(function(bQ){try{bO();bP.k(bQ);}catch(bR){bP.k({$:1,$0:bR});}},bP.ct));};};E.Delay=function(bN){return function(bO){try{(bN(null))(bO);}catch(bP){bO.k({$:1,$0:bP});}};};E.Combine=function(bN,bO){return E.Bind(bN,function(){return bO;});};E.Bind=function(bN,bO){return E.checkCancel(function(bP){bN(G.New(function(bQ){var bR;if(bQ.$==0){bR=bQ.$0;E.scheduler().Fork(function(){try{(bO(bR))(bP);}catch(bS){bP.k({$:1,$0:bS});}});}else E.scheduler().Fork(function(){bP.k(bQ);});},bP.ct));});};E.Zero=function(){I.$cctor();return I.Zero;};E.Return=function(bN){return function(bO){bO.k({$:0,$0:bN});};};E.checkCancel=function(bN){return function(bO){if(bO.ct.c)E.cancel(bO);else bN(bO);};};E.cancel=function(bN){bN.k({$:2,$0:new _4.New(bN.ct)});};E.defCTS=function(){I.$cctor();return I.defCTS;};E.scheduler=function(){I.$cctor();return I.scheduler;};E.Register=function(bN,bO){var bP;return bN===E.noneCT()?{Dispose:function(){return null;}}:(bP=bN.r.push(bO)-1,{Dispose:function(){return M.set(bN.r,bP,a.ignore);}});};E.noneCT=function(){I.$cctor();return I.noneCT;};I.$cctor=function(){I.$cctor=a.ignore;I.noneCT=F.New(false,[]);I.scheduler=new H.New();I.defCTS=[new Q.New()];I.Zero=E.Return();I.GetCT=function(bN){bN.k({$:0,$0:bN.ct});};};K=J.T=bG.Class({Dispose:function(){if(this.d)this.d(this);},Current:function(){return this.e===1?this.c:this.e===0?B.FailWith("Enumeration has not started. Call MoveNext."):B.FailWith("Enumeration already finished.");},Current0:function(){return this.Current();},MoveNext:function(){var bN;bN=this.n(this);this.e=bN?1:2;return bN;}},j,K);K.New=bG.Ctor(function(bN,bO,bP,bQ){j.New.call(this);this.s=bN;this.c=bO;this.n=bP;this.d=bQ;this.e=0;},K);J.LRemoveAt=function(bN,bO){if(bN instanceof a.Array){if("resizable"in bN)bN.splice.apply(bN,[bO,1]);else J.FailReadOnly();}else bN.LRemoveAt(bO);};J.LInsert=function(bN,bO,bP){if(bN instanceof a.Array){if("resizable"in bN)bN.splice.apply(bN,[bO,0,bP]);else J.FailReadOnly();}else bN.LInsert(bO,bP);};J.LIndexOf=function(bN,bO){return bN instanceof a.Array?M.findIndexBound(bN,0,M.length(bN),bO==null?function(bP){return bP==null;}:function(bP){var bQ;bQ=bO;return bz.Equals(bQ,bP);}):bN.LIndexOf(bO);};J.LItemSet=function(bN,bO,bP){if(bN instanceof a.Array){if("readonly"in bN)J.FailReadOnly();else M.set(bN,bO,bP);}else bN.set_LItem(bO,bP);};J.LItemGet=function(bN,bO){return bN instanceof a.Array?M.get(bN,bO):bN.LItem(bO);};J.LRemoveAt0=function(bN,bO){if(bN instanceof a.Array){if("resizable"in bN)bN.splice.apply(bN,[bO,1]);else J.FailReadOnly();}else bN.LRemoveAt0(bO);};J.LRemove0=function(bN,bO){var bP;if(bN instanceof a.Array){if("resizable"in bN){bP=M.findIndexBound(bN,0,M.length(bN),bO==null?function(bQ){return bQ==null;}:function(bQ){var bR;bR=bO;return bz.Equals(bR,bQ);});if(bP===-1);else bN.splice.apply(bN,[bP,1]);}else J.FailReadOnly();}else bN.LRemove0(bO);};J.LInsert0=function(bN,bO,bP){if(bN instanceof a.Array){if("resizable"in bN)bN.splice.apply(bN,[bO,0,bP]);else J.FailReadOnly();}else bN.LInsert0(bO,bP);};J.LIndexOf0=function(bN,bO){return bN instanceof a.Array?M.findIndexBound(bN,0,M.length(bN),bO==null?function(bP){return bP==null;}:function(bP){var bQ;bQ=bO;return bz.Equals(bQ,bP);}):bN.LIndexOf0(bO);};J.LContains=function(bN,bO){return bN instanceof a.Array?M.contains(bO,bN):bN.LContains(bO);};J.LClear=function(bN){var bO,bP,bQ;if(bN instanceof a.Array){if("resizable"in bN){bO=M.length(bN);bN.splice.apply(bN,[0,bO]);}else if("readonly"in bN)J.FailReadOnly();else{for(bP=0,bQ=M.length(bN)-1;bP<=bQ;bP++)M.set(bN,bP,null);}}else bN.LClear();};J.LAdd=function(bN,bO){return bN instanceof a.Array?"resizable"in bN?(bN.push(bO),M.length(bN)-1):J.FailReadOnly():bN.LAdd(bO);};J.LItem0Set=function(bN,bO,bP){if(bN instanceof a.Array){if("readonly"in bN)J.FailReadOnly();else M.set(bN,bO,bP);}else bN.set_LItem0(bO,bP);};J.LItem0Get=function(bN,bO){return bN instanceof a.Array?M.get(bN,bO):bN.LItem0(bO);};J.LIsReadOnly=function(bN){return bN instanceof a.Array?"readonly"in bN:bN.LIsReadOnly();};J.IsFixedSize=function(bN){return bN instanceof a.Array?!("resizable"in bN):bN.LIsReadOnly();};J.Remove=function(bN,bO){var bP;return bN instanceof a.Array?"resizable"in bN?(bP=M.findIndexBound(bN,0,M.length(bN),bO==null?function(bQ){return bQ==null;}:function(bQ){var bR;bR=bO;return bz.Equals(bR,bQ);}),bP===-1?false:(bN.splice.apply(bN,[bP,1]),true)):J.FailReadOnly():"Remove"in bN?bN.Remove(bO):J.FailReadOnly();};J.Contains=function(bN,bO){return bN instanceof a.Array?M.contains(bO,bN):bN.Contains(bO);};J.Clear=function(bN){var bO;if(bN instanceof a.Array){if("resizable"in bN){bO=M.length(bN);bN.splice.apply(bN,[0,bO]);}else J.FailReadOnly();}else if("Clear"in bN)bN.Clear();else J.FailReadOnly();};J.Add=function(bN,bO){if(bN instanceof a.Array){if("resizable"in bN)bN.push(bO);else J.FailReadOnly();}else if("Add"in bN)bN.Add(bO);else J.FailReadOnly();};J.FailReadOnly=function(){return B.FailWith("Collection is read-only.");};J.IsReadOnly=function(bN){return bN instanceof a.Array?!("resizable"in bN):bN.IsReadOnly();};J.CopyTo0=function(bN,bO,bP){if(bN instanceof a.Array)J.ArrayCopyTo(bN,bO,bP);else if("CopyTo0"in bN)bN.CopyTo0(bO,bP);else bN.CopyTo(bO,bP);};J.CopyTo=function(bN,bO,bP){if(bN instanceof a.Array)J.ArrayCopyTo(bN,bO,bP);else bN.CopyTo(bO,bP);};J.ArrayCopyTo=function(bN,bO,bP){if(M.length(bN)+bP<M.length(bO))throw new _5.New$2("array");else void 0;M.blit(bN,0,bO,bP,M.length(bN));};J.Count0=function(bN){return bN instanceof a.Array?M.length(bN):"Count0"in bN?bN.Count0():bN.Count();};J.Count=function(bN){return bN instanceof a.Array?M.length(bN):bN.Count();};J.Reset=function(bN){if("Reset"in bN)bN.Reset();else B.FailWith("IEnumerator.Reset not supported");};J.Get0=function(bN){return bN instanceof a.Array?J.ArrayEnumerator(bN):bz.Equals(typeof bN,"string")?J.StringEnumerator(bN):"GetEnumerator0"in bN?bN.GetEnumerator0():bN.GetEnumerator();};J.Get=function(bN){return bN instanceof a.Array?J.ArrayEnumerator(bN):bz.Equals(typeof bN,"string")?J.StringEnumerator(bN):bN.GetEnumerator();};J.StringEnumerator=function(bN){return new K.New(0,null,function(bO){var bP;bP=bO.s;return bP<bN.length&&(bO.c=bN[bP],bO.s=bP+1,true);},void 0);};J.ArrayEnumerator=function(bN){return new K.New(0,null,function(bO){var bP;bP=bO.s;return bP<M.length(bN)&&(bO.c=M.get(bN,bP),bO.s=bP+1,true);},void 0);};L.Undefined={$:0};M.splitInto=function(bN,bO){var bP,bQ,bR,bS,bT,bU,bV,bW,bX;if(bN<=0)B.FailWith("Count must be positive");bQ=M.length(bO);if(bQ===0)return[];else{bR=bz.Compare(bN,bQ)===-1?bN:bQ;bS=M.create(bR,null);bT=bQ/bR>>0;bP=0;for(bU=0,bV=bQ%bR-1;bU<=bV;bU++){bS[bU]=M.sub(bO,bP,bT+1);bP=bP+bT+1;}for(bW=bQ%bR,bX=bR-1;bW<=bX;bW++){bS[bW]=M.sub(bO,bP,bT);bP=bP+bT;}return bS;}};M.contains=function(bN,bO){var bP,bQ,bR,bS;bP=true;bQ=0;bS=M.length(bO);while(bP&&bQ<bS)if(bz.Equals(bO[bQ],bN))bP=false;else bQ=bQ+1;return!bP;};M.tryFindBack=function(bN,bO){var bP,bQ,bR;bP=null;bQ=bO.length-1;while(bQ>=0&&bP==null){bR=bO[bQ];if(bN(bR))bP={$:1,$0:bR};bQ=bQ-1;}return bP;};M.tryFindIndexBack=function(bN,bO){var bP,bQ;bP=null;bQ=bO.length-1;while(bQ>=0&&bP==null){bN(M.get(bO,bQ))?bP={$:1,$0:bQ}:void 0;bQ=bQ-1;}return bP;};M.mapFold=function(bN,bO,bP){var bQ,bR,bS,bT,bU;bR=new a.Array(bP.length);bQ=bO;for(bS=0,bT=bP.length-1;bS<=bT;bS++){bU=bN(bQ,bP[bS]);bR[bS]=bU[0];bQ=bU[1];}return[bR,bQ];};M.mapFoldBack=function(bN,bO,bP){var bQ,bR,bS,bT,bU,bV,bW,bX;bS=new a.Array(bO.length);bQ=bP;bT=bO.length;for(bU=1,bV=bT;bU<=bV;bU++){bW=bT-bU;bX=bN(bO[bW],bQ);bS[bW]=bX[0];bQ=bX[1];}return[bS,bQ];};M.mapInPlace=function(bN,bO){var bP,bQ;for(bP=0,bQ=bO.length-1;bP<=bQ;bP++)bO[bP]=bN(bO[bP]);};M.mapiInPlace=function(bN,bO){var bP,bQ;for(bP=0,bQ=bO.length-1;bP<=bQ;bP++)bO[bP]=bN(bP,bO[bP]);return bO;};M.sortInPlaceByDescending=function(bN,bO){M.mapInPlace(function(bP){return bP[0];},M.mapiInPlace(function(bP,bQ){return[bQ,[bN(bQ),bP]];},bO).sort(function(bP,bQ){return-bz.Compare(bP[1],bQ[1]);}));};N.tryHead=function(bN){var bO;bO=J.Get(bN);try{return bO.MoveNext()?{$:1,$0:bO.Current()}:null;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.tryItem=function(bN,bO){var bP,bQ,bR;if(bN<0)return null;else{bP=0;bQ=J.Get(bO);try{bR=true;while(bR&&bP<=bN)if(bQ.MoveNext())bP=bP+1;else bR=false;return bR?{$:1,$0:bQ.Current()}:null;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}}};N.tryLast=function(bN){var bO,bP,bQ;bO=J.Get(bN);try{if(bO.MoveNext()){bQ=bO.Current();while(bO.MoveNext())bQ=bO.Current();bP={$:1,$0:bQ};}else bP=null;return bP;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.chunkBySize=function(bN,bO){bN<=0?B.FailWith("Chunk size must be positive"):void 0;return{GetEnumerator:function(){var bP;bP=J.Get(bO);return new K.New(true,null,function(bQ){var bR;if(bQ.s&&bP.MoveNext()){bR=[bP.Current()];while(bQ.s&&M.length(bR)<bN)if(bP.MoveNext())bR.push(bP.Current());else bQ.s=false;bQ.c=bR;return true;}else return false;},function(){bP.Dispose();});}};};M.countBy=function(bN,bO){var bP,bQ,bR,bS,bT;bP=new _0.New$5();bQ=[];for(bR=0,bS=M.length(bO)-1;bR<=bS;bR++){bT=bN(bO[bR]);if(bP.ContainsKey(bT))bP.set_Item(bT,bP.Item(bT)+1);else{bQ.push(bT);bP.DAdd(bT,1);}}M.mapInPlace(function(bU){return[bU,bP.Item(bU)];},bQ);return bQ;};N.except=function(bN,bO){return{GetEnumerator:function(){var bP,bQ;bP=J.Get(bO);bQ=new bg.New$2(bN);return new K.New(null,null,function(bR){var bS,bT;if(bP.MoveNext()){bS=bP.Current();bT=bQ.SAdd(bS);while(!bT&&bP.MoveNext()){bS=bP.Current();bT=bQ.SAdd(bS);}return bT&&(bR.c=bS,true);}else return false;},function(){bP.Dispose();});}};};O.skip=function(bN,bO){var bP,bQ,bR;bP=bO;for(bQ=1,bR=bN;bQ<=bR;bQ++)if(bP.$==0)B.FailWith("Input list too short.");else bP=bP.$1;return bP;};M.groupBy=function(bN,bO){var bP,bQ,bR,bS,bT,bU;bP=new _0.New$5();bQ=[];for(bR=0,bS=M.length(bO)-1;bR<=bS;bR++){bT=bO[bR];bU=bN(bT);if(bP.ContainsKey(bU))bP.Item(bU).push(bT);else{bQ.push(bU);bP.DAdd(bU,[bT]);}}M.mapInPlace(function(bV){return[bV,bP.Item(bV)];},bQ);return bQ;};N.insufficient=function(){return B.FailWith("The input sequence has an insufficient number of elements.");};N.last=function(bN){var bO,bP,bQ;bO=J.Get(bN);try{if(!bO.MoveNext())bP=N.insufficient();else{bQ=bO.Current();while(bO.MoveNext())bQ=bO.Current();bP=bQ;}return bP;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.contains=function(bN,bO){var bP,bQ;bP=J.Get(bO);try{bQ=false;while(!bQ&&bP.MoveNext())bQ=bz.Equals(bP.Current(),bN);return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};O.skipWhile=function(bN,bO){var bP;bP=bO;while(!(bP.$==0)&&bN(O.head(bP)))bP=O.tail(bP);return bP;};N.nonNegative=function(){return B.FailWith("The input must be non-negative.");};M.transposeArray=function(bN){var bO,bP,bQ,bR,bS,bT,bU,bV,bW;bO=M.length(bN);if(bO===0)return[];else{bP=M.length(M.get(bN,0));for(bQ=1,bR=bO-1;bQ<=bR;bQ++)if(bP!==M.length(M.get(bN,bQ)))B.FailWith("The arrays have different lengths.");bS=new a.Array(bP);for(bT=0,bU=bP-1;bT<=bU;bT++){bS[bT]=new a.Array(bO);for(bV=0,bW=bO-1;bV<=bW;bV++)bS[bT][bV]=M.get(M.get(bN,bV),bT);}return bS;}};M.checkBounds=function(bN,bO){if(bO<0||bO>=bN.length)B.FailWith("Index was outside the bounds of the array.");};M.checkBounds2D=function(bN,bO,bP){if(bO<0||bP<0||bO>=bN.length||bP>=(bN.length?bN[0].length:0))throw new _3.New();};M.checkRange=function(bN,bO,bP){if(bP<0||bO<0||bN.length<bO+bP)B.FailWith("Index was outside the bounds of the array.");};M.set=function(bN,bO,bP){M.checkBounds(bN,bO);bN[bO]=bP;};M.get=function(bN,bO){M.checkBounds(bN,bO);return bN[bO];};M.sub=function(bN,bO,bP){M.checkRange(bN,bO,bP);return bN.slice(bO,bO+bP);};M.setSub=function(bN,bO,bP,bQ){var bR,bS;for(bR=0,bS=bP-1;bR<=bS;bR++)M.set(bN,bO+bR,M.get(bQ,bR));};M.get2D=function(bN,bO,bP){M.checkBounds2D(bN,bO,bP);return bN[bO][bP];};M.set2D=function(bN,bO,bP,bQ){M.checkBounds2D(bN,bO,bP);bN[bO][bP]=bQ;};M.zeroCreate2D=function(bN,bO){var bP;bP=M.init(bN,function(){return M.create(bO,null);});bP.dims=2;return bP;};M.sub2D=function(bN,bO,bP,bQ,bR){var bS,bT,bU,bV,bW,bX,bY;bS=bQ<0?0:bQ;bT=bR<0?0:bR;bU=M.zeroCreate2D(bS,bT);for(bV=0,bW=bS-1;bV<=bW;bV++){for(bX=0,bY=bT-1;bX<=bY;bX++)M.set2D(bU,bV,bX,M.get2D(bN,bO+bV,bP+bX));}return bU;};M.setSub2D=function(bN,bO,bP,bQ,bR,bS){var bT,bU,bV,bW;for(bT=0,bU=bQ-1;bT<=bU;bT++){for(bV=0,bW=bR-1;bV<=bW;bV++)M.set2D(bN,bO+bT,bP+bV,M.get2D(bS,bT,bV));}};M.length=function(bN){return bN.dims===2?bN.length*bN.length:bN.length;};b.checkThis=function(bN){return bz.Equals(bN,null)?B.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):bN;};M.binarySearch=function(bN,bO,bP,bQ){function bR(bS,bT){var bU,bV;while(true)if(bS>bT)return~bS;else{bU=(bS+bT)/2>>0;bV=bO(M.get(bN,bU));if(bS===bT)return bV===0?bS:bV>0?~(bS+1):~bS;else if(bV<=0)bT=bU;else bS=bU+1;}}if(bP<0)throw new _6.New("index","Non-negative number required.");else null;if(bQ>M.length(bN))throw new _5.New$2("Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.");else null;if(bQ<bP)throw new _6.New("length","Non-negative number required.");else null;return bR(bP,bQ-1);};M.binarySearchComparer=function(bN){return bN.CompareTo0?function(bO){return bN.CompareTo0(bO);}:function(bO){if(bO.CompareTo0)return-bO.CompareTo0(bN);else throw new _8.New$2("Failed to compare two elements in the array.",new _5.New$2("At least one object must implement IComparable."));};};M.sortInternal=function(bN,bO,bP,bQ,bR){function bS(bU,bV){var bW,bX,bY,bZ;bX=bN[bV];bW=bU-1;for(bY=bU,bZ=bV-1;bY<=bZ;bY++)if(bQ(bN[bY],bX)<0){bW=bW+1;bR(bW,bY);}if(bQ(bN[bV],bN[bW+1])<0)bR(bW+1,bV);return bW+1;}function bT(bU,bV){var bW;while(true)if(bU<bV){bW=bS(bU,bV);bT(bU,bW-1);bU=bW+1;}else return null;}bT(bO,bO+bP-1);};M.sortSub=function(bN,bO,bP,bQ){M.sortInternal(bN,bO,bP,bQ,function(bR,bS){var bT;bT=bN[bR];bN[bR]=bN[bS];bN[bS]=bT;});};M.sortByKeys=function(bN,bO,bP,bQ,bR){M.sortInternal(bN,bP,bQ,bR,function(bS,bT){var bU,bV;bU=bN[bS];bN[bS]=bN[bT];bN[bT]=bU;bV=bO[bS];bO[bS]=bO[bT];bO[bT]=bV;});};M.clear=function(bN,bO,bP){var bQ,bR;if(bN==null)throw new _7.New$1("array");else void 0;if(bO<0||bP<0||bO+bP>M.length(bN))throw new _3.New();else void 0;for(bQ=bO,bR=bO+bP-1;bQ<=bR;bQ++)bN[bQ]=typeof bN[bQ]=="number"?0:null;};M.constrainedCopy=function(bN,bO,bP,bQ,bR){if(bN===bP&&bQ<=bO+bR)M.blit(M.init(bR,function(bS){return M.get(bN,bO+bS);}),0,bP,bQ,bR);else M.blit(bN,bO,bP,bQ,bR);};M.findIndexBound=function(bN,bO,bP,bQ){function bR(bS,bT){while(true)if(bT===bS)return -1;else if(bQ(M.get(bN,bT)))return bT;else bT=bT+1;}if(bN==null)throw new _7.New$1("array");else null;if(bQ==null)throw new _7.New$1("match");else null;if(bO<0)throw new _6.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bP<0||bO+bP>M.length(bN))throw new _6.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;return bR(bO+bP,bO);};M.findLastIndexBound=function(bN,bO,bP,bQ){function bR(bS){while(true)if(bS<bO)return -1;else if(bQ(M.get(bN,bS)))return bS;else bS=bS-1;}if(bN==null)throw new _7.New$1("array");else null;if(bQ==null)throw new _7.New$1("match");else null;if(bO<0)throw new _6.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bP<0||bO+bP>M.length(bN))throw new _6.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;return bR(bO+bP-1);};M.reverse=function(bN,bO,bP){var bQ;bQ=M.sub(bN,bO,bP).slice().reverse();M.blit(bQ,0,bN,bO,M.length(bQ));};M.sum=function(bN){var bO,bP;bO=0;bP=0;for(;bP<bN.length;bP++)bO+=bN[bP];return bO;};M.sumBy=function(bN,bO){var bP,bQ;bP=0;bQ=0;for(;bQ<bO.length;bQ++)bP+=bN(bO[bQ]);return bP;};M.allPairs=function(bN,bO){var bP,bQ,bR,bS,bT,bU,bV;bP=bN.length;bQ=bO.length;bR=new a.Array(bP*bQ);for(bS=0,bT=bP-1;bS<=bT;bS++){for(bU=0,bV=bQ-1;bU<=bV;bU++)bR[bS*bQ+bU]=[bN[bS],bO[bU]];}return bR;};M.average=function(bN){return M.sum(bN)/bN.length;};M.averageBy=function(bN,bO){return M.sumBy(bN,bO)/bO.length;};M.blit=function(bN,bO,bP,bQ,bR){var bS,bT;M.checkRange(bN,bO,bR);M.checkRange(bP,bQ,bR);for(bS=0,bT=bR-1;bS<=bT;bS++)bP[bQ+bS]=bN[bO+bS];};M.choose=function(bN,bO){var bP,bQ,bR,bS;bP=[];for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++){bS=bN(bO[bQ]);if(bS==null);else bP.push(bS.$0);}return bP;};M.collect=function(bN,bO){return a.Array.prototype.concat.apply([],M.map(bN,bO));};M.concat=function(bN){return a.Array.prototype.concat.apply([],M.ofSeq(bN));};M.create=function(bN,bO){var bP,bQ,bR;bP=new a.Array(bN);for(bQ=0,bR=bN-1;bQ<=bR;bQ++)bP[bQ]=bO;return bP;};M.exists=function(bN,bO){var bP,bQ,bR,bS;bP=false;bQ=0;bS=M.length(bO);while(!bP&&bQ<bS)if(bN(bO[bQ]))bP=true;else bQ=bQ+1;return bP;};M.exists2=function(bN,bO,bP){var bQ,bR,bS,bT;M.checkLength(bO,bP);bQ=false;bR=0;bT=M.length(bO);while(!bQ&&bR<bT)if(bN(bO[bR],bP[bR]))bQ=true;else bR=bR+1;return bQ;};M.fill=function(bN,bO,bP,bQ){var bR,bS;M.checkRange(bN,bO,bP);for(bR=bO,bS=bO+bP-1;bR<=bS;bR++)bN[bR]=bQ;};M.filter=function(bN,bO){var bP,bQ,bR;bP=[];for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)if(bN(bO[bQ]))bP.push(bO[bQ]);return bP;};M.find=function(bN,bO){var bP;bP=M.tryFind(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};M.findIndex=function(bN,bO){var bP;bP=M.tryFindIndex(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};M.fold=function(bN,bO,bP){var bQ,bR,bS;bQ=bO;for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ=bN(bQ,bP[bR]);return bQ;};M.fold2=function(bN,bO,bP,bQ){var bR,bS,bT;M.checkLength(bP,bQ);bR=bO;for(bS=0,bT=bP.length-1;bS<=bT;bS++)bR=bN(bR,bP[bS],bQ[bS]);return bR;};M.foldBack=function(bN,bO,bP){var bQ,bR,bS,bT,bU;bQ=bP;bS=bO.length;for(bT=1,bU=bS;bT<=bU;bT++)bQ=bN(bO[bS-bT],bQ);return bQ;};M.foldBack2=function(bN,bO,bP,bQ){var bR,bS,bT,bU,bV;M.checkLength(bO,bP);bT=bO.length;bS=bQ;for(bU=1,bV=bT;bU<=bV;bU++)bS=bN(bO[bT-bU],bP[bT-bU],bS);return bS;};M.forall=function(bN,bO){var bP,bQ,bR,bS;bP=true;bQ=0;bS=M.length(bO);while(bP&&bQ<bS)if(bN(bO[bQ]))bQ=bQ+1;else bP=false;return bP;};M.forall2=function(bN,bO,bP){var bQ,bR,bS,bT;M.checkLength(bO,bP);bQ=true;bR=0;bT=M.length(bO);while(bQ&&bR<bT)if(bN(bO[bR],bP[bR]))bR=bR+1;else bQ=false;return bQ;};M.init=function(bN,bO){var bP,bQ,bR;if(bN<0)B.FailWith("Negative size given.");else null;bP=new a.Array(bN);for(bQ=0,bR=bN-1;bQ<=bR;bQ++)bP[bQ]=bO(bQ);return bP;};M.iter=function(bN,bO){var bP,bQ;for(bP=0,bQ=bO.length-1;bP<=bQ;bP++)bN(bO[bP]);};M.iter2=function(bN,bO,bP){var bQ,bR;M.checkLength(bO,bP);for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)bN(bO[bQ],bP[bQ]);};M.iteri=function(bN,bO){var bP,bQ;for(bP=0,bQ=bO.length-1;bP<=bQ;bP++)bN(bP,bO[bP]);};M.iteri2=function(bN,bO,bP){var bQ,bR;M.checkLength(bO,bP);for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)bN(bQ,bO[bQ],bP[bQ]);};M.map=function(bN,bO){var bP,bQ,bR;bP=new a.Array(bO.length);for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)bP[bQ]=bN(bO[bQ]);return bP;};M.map2=function(bN,bO,bP){var bQ,bR,bS;M.checkLength(bO,bP);bQ=new a.Array(bP.length);for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ[bR]=bN(bO[bR],bP[bR]);return bQ;};M.mapi=function(bN,bO){var bP,bQ,bR;bP=new a.Array(bO.length);for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)bP[bQ]=bN(bQ,bO[bQ]);return bP;};M.mapi2=function(bN,bO,bP){var bQ,bR,bS;M.checkLength(bO,bP);bQ=new a.Array(bO.length);for(bR=0,bS=bO.length-1;bR<=bS;bR++)bQ[bR]=bN(bR,bO[bR],bP[bR]);return bQ;};M.max=function(bN){var bO,bP,bQ,bR;M.nonEmpty(bN);bO=bN[0];for(bP=1,bQ=bN.length-1;bP<=bQ;bP++){bR=bN[bP];if(bz.Compare(bR,bO)===1)bO=bR;}return bO;};M.maxBy=function(bN,bO){var bP,bQ,bR,bS,bT,bU;M.nonEmpty(bO);bP=bO[0];bQ=bN(bP);for(bR=1,bS=bO.length-1;bR<=bS;bR++){bT=bO[bR];bU=bN(bT);if(bz.Compare(bU,bQ)===1){bP=bT;bQ=bU;}}return bP;};M.min=function(bN){var bO,bP,bQ,bR;M.nonEmpty(bN);bO=bN[0];for(bP=1,bQ=bN.length-1;bP<=bQ;bP++){bR=bN[bP];if(bz.Compare(bR,bO)===-1)bO=bR;}return bO;};M.minBy=function(bN,bO){var bP,bQ,bR,bS,bT,bU;M.nonEmpty(bO);bP=bO[0];bQ=bN(bP);for(bR=1,bS=bO.length-1;bR<=bS;bR++){bT=bO[bR];bU=bN(bT);if(bz.Compare(bU,bQ)===-1){bP=bT;bQ=bU;}}return bP;};M.ofList=function(bN){var bO,bP;bP=[];bO=bN;while(!(bO.$==0)){bP.push(O.head(bO));bO=O.tail(bO);}return bP;};M.ofSeq=function(bN){var bO,bP;if(bN instanceof a.Array)return bN.slice();else if(bN instanceof bk)return M.ofList(bN);else{bO=[];bP=J.Get(bN);try{while(bP.MoveNext())bO.push(bP.Current());return bO;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}}};M.partition=function(bN,bO){var bP,bQ,bR,bS;bP=[];bQ=[];for(bR=0,bS=bO.length-1;bR<=bS;bR++)if(bN(bO[bR]))bP.push(bO[bR]);else bQ.push(bO[bR]);return[bP,bQ];};M.permute=function(bN,bO){var bP,bQ,bR;bP=new a.Array(bO.length);for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)bP[bN(bQ)]=bO[bQ];return bP;};M.pick=function(bN,bO){var bP;bP=M.tryPick(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};M.reduce=function(bN,bO){var bP,bQ,bR;M.nonEmpty(bO);bP=bO[0];for(bQ=1,bR=bO.length-1;bQ<=bR;bQ++)bP=bN(bP,bO[bQ]);return bP;};M.reduceBack=function(bN,bO){var bP,bQ,bR,bS,bT;M.nonEmpty(bO);bR=bO.length;bQ=bO[bR-1];for(bS=2,bT=bR;bS<=bT;bS++)bQ=bN(bO[bR-bS],bQ);return bQ;};M.scan=function(bN,bO,bP){var bQ,bR,bS;bQ=new a.Array(1+bP.length);bQ[0]=bO;for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ[bR+1]=bN(bQ[bR],bP[bR]);return bQ;};M.scanBack=function(bN,bO,bP){var bQ,bR,bS,bT;bQ=bO.length;bR=new a.Array(1+bQ);bR[bQ]=bP;for(bS=0,bT=bQ-1;bS<=bT;bS++)bR[bQ-bS-1]=bN(bO[bQ-bS-1],bR[bQ-bS]);return bR;};M.sort=function(bN){return M.map(function(bO){return bO[0];},M.mapi(function(bO,bP){return[bP,bO];},bN).sort(bz.Compare));};M.sortBy=function(bN,bO){return M.map(function(bP){return bP[0];},M.mapi(function(bP,bQ){return[bQ,[bN(bQ),bP]];},bO).sort(function(bP,bQ){return bz.Compare(bP[1],bQ[1]);}));};M.sortInPlace=function(bN){M.mapInPlace(function(bO){return bO[0];},M.mapiInPlace(function(bO,bP){return[bP,bO];},bN).sort(bz.Compare));};M.sortInPlaceBy=function(bN,bO){M.mapInPlace(function(bP){return bP[0];},M.mapiInPlace(function(bP,bQ){return[bQ,[bN(bQ),bP]];},bO).sort(function(bP,bQ){return bz.Compare(bP[1],bQ[1]);}));};M.sortInPlaceWith=function(bN,bO){bO.sort(bN);};M.sortWith=function(bN,bO){return bO.slice().sort(bN);};M.sortByDescending=function(bN,bO){return M.map(function(bP){return bP[0];},M.mapi(function(bP,bQ){return[bQ,[bN(bQ),bP]];},bO).sort(function(bP,bQ){return-bz.Compare(bP[1],bQ[1]);}));};M.sortDescending=function(bN){return M.map(function(bO){return bO[0];},M.mapi(function(bO,bP){return[bP,bO];},bN).sort(function(bO,bP){return-bz.Compare(bO,bP);}));};M.transpose=function(bN){return bN instanceof a.Array?M.transposeArray(bN):M.transposeArray(M.ofSeq(bN));};M.tryFind=function(bN,bO){var bP,bQ;bP=null;bQ=0;while(bQ<bO.length&&bP==null){bN(bO[bQ])?bP={$:1,$0:bO[bQ]}:void 0;bQ=bQ+1;}return bP;};M.tryFindIndex=function(bN,bO){var bP,bQ;bP=null;bQ=0;while(bQ<bO.length&&bP==null){bN(bO[bQ])?bP={$:1,$0:bQ}:void 0;bQ=bQ+1;}return bP;};M.tryHead=function(bN){return bN.length===0?null:{$:1,$0:bN[0]};};M.tryItem=function(bN,bO){return bO.length<=bN||bN<0?null:{$:1,$0:bO[bN]};};M.tryLast=function(bN){var bO;bO=bN.length;return bO===0?null:{$:1,$0:bN[bO-1]};};M.tryPick=function(bN,bO){var bP,bQ,bR;bP=null;bQ=0;while(bQ<bO.length&&bP==null){bR=bN(bO[bQ]);if(bR!=null&&bR.$==1)bP=bR;bQ=bQ+1;}return bP;};M.unzip=function(bN){var bO,bP,bQ,bR,bS;bO=[];bP=[];for(bQ=0,bR=bN.length-1;bQ<=bR;bQ++){bS=bN[bQ];bO.push(bS[0]);bP.push(bS[1]);}return[bO,bP];};M.unzip3=function(bN){var bO,bP,bQ,bR,bS,bT;bO=[];bP=[];bQ=[];for(bR=0,bS=bN.length-1;bR<=bS;bR++){bT=bN[bR];bO.push(bT[0]);bP.push(bT[1]);bQ.push(bT[2]);}return[bO,bP,bQ];};M.zip=function(bN,bO){var bP,bQ,bR;M.checkLength(bN,bO);bP=M.create(bN.length,null);for(bQ=0,bR=bN.length-1;bQ<=bR;bQ++)bP[bQ]=[bN[bQ],bO[bQ]];return bP;};M.zip3=function(bN,bO,bP){var bQ,bR,bS;M.checkLength(bN,bO);M.checkLength(bO,bP);bQ=M.create(bN.length,null);for(bR=0,bS=bN.length-1;bR<=bS;bR++)bQ[bR]=[bN[bR],bO[bR],bP[bR]];return bQ;};M.chunkBySize=function(bN,bO){return M.ofSeq(N.chunkBySize(bN,bO));};M.compareWith=function(bN,bO,bP){return N.compareWith(bN,bO,bP);};M.distinct=function(bN){return M.ofSeq(N.distinct(bN));};M.distinctBy=function(bN,bO){return M.ofSeq(N.distinctBy(bN,bO));};M.except=function(bN,bO){return M.ofSeq(N.except(bN,bO));};M.findBack=function(bN,bO){var bP;bP=M.tryFindBack(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};M.findIndexBack=function(bN,bO){var bP;bP=M.tryFindIndexBack(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};M.head=function(bN){M.nonEmpty(bN);return bN[0];};M.last=function(bN){M.nonEmpty(bN);return bN[bN.length-1];};M.map3=function(bN,bO,bP,bQ){var bR,bS,bT;M.checkLength(bO,bP);M.checkLength(bO,bQ);bR=new a.Array(bQ.length);for(bS=0,bT=bQ.length-1;bS<=bT;bS++)bR[bS]=bN(bO[bS],bP[bS],bQ[bS]);return bR;};M.pairwise=function(bN){return M.ofSeq(N.pairwise(bN));};M.replicate=function(bN,bO){return M.create(bN,bO);};M.indexed=function(bN){return M.mapi(function(bO,bP){return[bO,bP];},bN);};M.skip=function(bN,bO){return bN<0?N.nonNegative():bN>bO.length?N.insufficient():bO.slice(bN);};M.skipWhile=function(bN,bO){var bP,bQ;bQ=bO.length;bP=0;while(bP<bQ&&bN(bO[bP]))bP=bP+1;return bO.slice(bP);};M.tail=function(bN){return M.skip(1,bN);};M.take=function(bN,bO){return bN<0?N.nonNegative():bN>bO.length?N.insufficient():bO.slice(0,bN);};M.takeWhile=function(bN,bO){var bP,bQ;bQ=bO.length;bP=0;while(bP<bQ&&bN(bO[bP]))bP=bP+1;return bO.slice(0,bP);};M.exactlyOne=function(bN){return bN.length===1?bN[0]:B.FailWith("The input does not have precisely one element.");};M.tryExactlyOne=function(bN){return bN.length===1?{$:1,$0:bN[0]}:null;};M.unfold=function(bN,bO){return M.ofSeq(N.unfold(bN,bO));};M.windowed=function(bN,bO){return M.ofSeq(N.windowed(bN,bO));};M.splitAt=function(bN,bO){return[M.take(bN,bO),M.skip(bN,bO)];};M.insertAt=function(bN,bO,bP){return bN>=0&&M.length(bP)>bN?bN+1===M.length(bP)?bP.concat([bO]):bN===0?[bO].concat(bP):bl.array(bP,{$:1,$0:0},{$:1,$0:bN-1}).concat([bO]).concat(bl.array(bP,{$:1,$0:bN},null)):B.FailWith("Incorrect index");};M.insertManyAt=function(bN,bO,bP){return bN>=0&&M.length(bP)>bN?bN+1===M.length(bP)?bP.concat(M.ofSeq(bO)):bN===0?M.ofSeq(bO).concat(bP):bl.array(bP,{$:1,$0:0},{$:1,$0:bN-1}).concat(M.ofSeq(bO)).concat(bl.array(bP,{$:1,$0:bN},null)):B.FailWith("Incorrect index");};M.removeAt=function(bN,bO){return bN>=0&&M.length(bO)>bN?bN+1===M.length(bO)?bl.array(bO,{$:1,$0:0},{$:1,$0:bN-1}):bN===0?M.tail(bO):bl.array(bO,{$:1,$0:0},{$:1,$0:bN-1}).concat(bl.array(bO,{$:1,$0:bN+1},null)):B.FailWith("Incorrect index");};M.removeManyAt=function(bN,bO,bP){return bN+bO>=0&&M.length(bP)>bN+bO?bN+bO===M.length(bP)?bl.array(bP,{$:1,$0:0},{$:1,$0:bN-1}):bN===0?bl.array(bP,{$:1,$0:bO},null):bl.array(bP,{$:1,$0:0},{$:1,$0:bN-1}).concat(bl.array(bP,{$:1,$0:bN+bO},null)):B.FailWith("Incorrect index");};M.updateAt=function(bN,bO,bP){return bN>=0&&M.length(bP)>bN?bN+1===M.length(bP)?bl.array(bP,{$:1,$0:0},{$:1,$0:bN-1}).concat([bO]):bN===0?[bO].concat(M.tail(bP)):bl.array(bP,{$:1,$0:0},{$:1,$0:bN-1}).concat([bO]).concat(bl.array(bP,{$:1,$0:bN+1},null)):B.FailWith("Incorrect index");};M.nonEmpty=function(bN){if(bN.length===0)B.FailWith("The input array was empty.");};M.checkLength=function(bN,bO){if(bN.length!==bO.length)B.FailWith("The arrays have different lengths.");};P.init=function(bN,bO,bP){var bQ,bR,bS,bT,bU;bQ=M.zeroCreate2D(bN,bO);for(bR=0,bS=bN-1;bR<=bS;bR++){for(bT=0,bU=bO-1;bT<=bU;bT++)M.set2D(bQ,bR,bT,bP(bR,bT));}return bQ;};P.iter=function(bN,bO){var bP,bQ,bR,bS,bT,bU;bP=bO.length;bQ=bO.length?bO[0].length:0;for(bR=0,bS=bP-1;bR<=bS;bR++){for(bT=0,bU=bQ-1;bT<=bU;bT++)bN(M.get2D(bO,bR,bT));}};P.iteri=function(bN,bO){var bP,bQ,bR,bS,bT,bU;bP=bO.length;bQ=bO.length?bO[0].length:0;for(bR=0,bS=bP-1;bR<=bS;bR++){for(bT=0,bU=bQ-1;bT<=bU;bT++)bN(bR,bT,M.get2D(bO,bR,bT));}};P.map=function(bN,bO){return P.init(bO.length,bO.length?bO[0].length:0,function(bP,bQ){return bN(M.get2D(bO,bP,bQ));});};P.mapi=function(bN,bO){return P.init(bO.length,bO.length?bO[0].length:0,function(bP,bQ){return bN(bP,bQ,M.get2D(bO,bP,bQ));});};P.copy=function(bN){return P.init(bN.length,bN.length?bN[0].length:0,function(bO,bP){return M.get2D(bN,bO,bP);});};Q=b.CancellationTokenSource=bG.Class({CancelAfter:function(bN){var bO,bP;bO=this;if(!this.c){bP=this.pending;bP==null?void 0:a.clearTimeout(bP.$0);this.pending={$:1,$0:a.setTimeout(function(){bO.Cancel$1();},bN)};}},Cancel:function(bN){if(!bN)this.Cancel$1();else if(!this.c){this.c=true;M.iter(function(bO){bO();},this.r);}},Cancel$1:function(){var bN;if(!this.c){this.c=true;bN=M.choose(function(bO){try{bO();return null;}catch(bP){return{$:1,$0:bP};}},this.r);if(M.length(bN)>0)throw new _9.New$3(bN);else void 0;}}},j,Q);Q.CreateLinkedTokenSource=function(bN,bO){return Q.CreateLinkedTokenSource$1([bN,bO]);};Q.CreateLinkedTokenSource$1=function(bN){var bO;bO=new Q.New();M.iter(function(bP){function bQ(bR){return bO.Cancel$1();}E.Register(bP,function(){bQ();});},bN);return bO;};Q.New=bG.Ctor(function(){j.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},Q);R.ToBinaryStr=function(bN){return"0b"+bt.concat("",M.map(R.ToBin,bN.slice().reverse()));};R.ToBin=function(bN){var bO;function bP(bQ,bR){return function(bS){return bQ/B.toInt(bM.pow(2,7-bS))>>0===1?[bQ%B.toInt(bM.pow(2,7-bS)),bR+"1"]:[bQ,bR+"0"];};}return(bO=O.ofSeq(B.range(0,7)),N.fold(function(bQ,bR){return(function(bS){return bP(bS[0],bS[1]);}(bQ))(bR);},[B.toInt(bN),""],bO))[1];};S.IsWhiteSpace=function(bN){return bN.match(new a.RegExp("\\s"))!==null;};S.Parse=function(bN){return bN.length===1?bN:B.FailWith("String must be exactly one character long.");};S.IsUpper=function(bN){return bN>="A"&&bN<="Z";};S.IsLower=function(bN){return bN>="a"&&bN<="z";};S.IsLetterOrDigit=function(bN){return S.IsLetter(bN)||S.IsDigit(bN);};S.IsLetter=function(bN){return bN>="A"&&bN<="Z"||bN>="a"&&bN<="z";};S.IsDigit=function(bN){return bN>="0"&&bN<="9";};S.IsControl=function(bN){return bN>="\u0000"&&bN<="\u001f"||bN>="\u0080"&&bN<="\u009f";};S.GetNumericValue=function(bN){return bN>="0"&&bN<="9"?bN.charCodeAt()-"0".charCodeAt():-1;};T.observer=function(bN){return{OnCompleted:function(){return null;},OnError:function(){return null;},OnNext:bN};};U.LongTime=function(bN){return(new bK(bN)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});};U.ShortTime=function(bN){return(new bK(bN)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});};U.LongDate=function(bN){return(new bK(bN)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});};U.Parse=function(bN){var bO;bO=U.TryParse(bN);return bO!=null&&bO.$==1?bO.$0:B.FailWith("Failed to parse date string.");};U.TryParse=function(bN){var bO;bO=bK.parse(bN);return a.isNaN(bO)?null:{$:1,$0:bO};};U.AddMonths=function(bN,bO){var bP;bP=new bK(bN);return(new bK(bP.getFullYear(),bP.getMonth()+bO,bP.getDate(),bP.getHours(),bP.getMinutes(),bP.getSeconds(),bP.getMilliseconds())).getTime();};U.AddYears=function(bN,bO){var bP;bP=new bK(bN);return(new bK(bP.getFullYear()+bO,bP.getMonth(),bP.getDate(),bP.getHours(),bP.getMinutes(),bP.getSeconds(),bP.getMilliseconds())).getTime();};U.TimePortion=function(bN){var bO;bO=new bK(bN);return(((24*0+bO.getHours())*60+bO.getMinutes())*60+bO.getSeconds())*1000+bO.getMilliseconds();};U.DatePortion=function(bN){var bO;bO=new bK(bN);return(new bK(bO.getFullYear(),bO.getMonth(),bO.getDate())).getTime();};V.get_Now=function(){var bN;bN=new bK();return{d:bN.getTime(),o:-bN.getTimezoneOffset()};};V.get_DateTime=function(bN){return bN.d;};W.InvocationList=function(bN){return bN.$Invokes||[bN];};W.RemoveAll=function(bN,bO){var bP;bP=W.InvocationList(bN);if(M.length(W.InvocationList(bO))>1)B.FailWith("TODO: Remove multicast delegates");return bG.CreateDelegate(M.filter(function(bQ){return!bz.Equals(bQ,bO);},bP));};W.Remove=function(bN,bO){var bP,bQ,bR,bS,bT,bU,bV;bR=W.InvocationList(bN);if(M.length(W.InvocationList(bO))>1)B.FailWith("TODO: Remove multicast delegates");bS=[];bQ=false;for(bT=M.length(bR)-1,bU=0;bT>=bU;bT--){bV=M.get(bR,bT);if(!bQ&&bG.DelegateEqual(bV,bO))bQ=true;else bS.unshift(bV);}return bG.CreateDelegate(bS);};W.DelegateTarget=function(bN){var bO;return!bN?null:"$Target"in bN?bN.$Target:"$Invokes"in bN?(bO=bN.$Invokes,(M.get(bO,M.length(bO)-1))[1]):null;};X.getHashCode=function(bN,bO){return bN.CGetHashCode(bO);};X.equals=function(bN){return function(bO,bP){return bN.CEquals(bO,bP);};};X.alreadyAdded=function(){return B.FailWith("An item with the same key has already been added.");};X.notPresent=function(){return B.FailWith("The given key was not present in the dictionary.");};Y=t.KeyCollection=bG.Class({GetEnumerator:function(){return J.Get(N.map(function(bN){return bN.K;},this.d));},IsReadOnly:function(){return true;},Count:function(){return this.d.count;},Contains:function(bN){return this.d.ContainsKey(bN);},CopyTo:function(bN,bO){J.ArrayCopyTo(M.ofSeq(this),bN,bO);}},j,Y);Y.New=bG.Ctor(function(bN){j.New.call(this);this.d=bN;},Y);Z=t.ValueCollection=bG.Class({GetEnumerator:function(){return J.Get(N.map(function(bN){return bN.V;},this.d));},IsReadOnly:function(){return true;},Count:function(){return this.d.count;},Contains:function(bN){return this.d.ContainsValue(bN);},CopyTo:function(bN,bO){J.ArrayCopyTo(M.ofSeq(this),bN,bO);}},j,Z);Z.New=bG.Ctor(function(bN){j.New.call(this);this.d=bN;},Z);_0=t.Dictionary=bG.Class({Keys:function(){return new Y.New(this);},Values:function(){return new Z.New(this);},RemoveKey:function(bN){return this.remove(bN);},GetEnumerator:function(){return J.Get0(M.concat(d.GetFieldValues(this.data)));},set_Item:function(bN,bO){this.set(bN,bO);},Item:function(bN){return this.get(bN);},DAdd:function(bN,bO){this.add(bN,bO);},remove:function(bN){var bO,bP,bQ,bR;bO=this;bP=this.hash(bN);bQ=this.data[bP];return bQ==null?false:(bR=M.filter(function(bS){return!bO.equals.apply(null,[(B.KeyValue(bS))[0],bN]);},bQ),M.length(bR)<bQ.length&&(this.count=this.count-1,this.data[bP]=bR,true));},add:function(bN,bO){var bP,bQ,bR;bP=this;bQ=this.hash(bN);bR=this.data[bQ];if(bR==null){this.count=this.count+1;this.data[bQ]=new a.Array({K:bN,V:bO});}else{M.exists(function(bS){return bP.equals.apply(null,[(B.KeyValue(bS))[0],bN]);},bR)?X.alreadyAdded():void 0;this.count=this.count+1;bR.push({K:bN,V:bO});}},set:function(bN,bO){var bP,bQ,bR,bS;bP=this;bQ=this.hash(bN);bR=this.data[bQ];if(bR==null){this.count=this.count+1;this.data[bQ]=new a.Array({K:bN,V:bO});}else{bS=M.tryFindIndex(function(bT){return bP.equals.apply(null,[(B.KeyValue(bT))[0],bN]);},bR);bS==null?(this.count=this.count+1,bR.push({K:bN,V:bO})):bR[bS.$0]={K:bN,V:bO};}},get:function(bN){var bO,bP;bO=this;bP=this.data[this.hash(bN)];return bP==null?X.notPresent():M.pick(function(bQ){var bR;bR=B.KeyValue(bQ);return bO.equals.apply(null,[bR[0],bN])?{$:1,$0:bR[1]}:null;},bP);},TryGetValue:function(bN,bO){var bP,bQ,bR;bP=this;bQ=this.data[this.hash(bN)];return bQ==null?false:(bR=M.tryPick(function(bS){var bT;bT=B.KeyValue(bS);return bP.equals.apply(null,[bT[0],bN])?{$:1,$0:bT[1]}:null;},bQ),bR!=null&&bR.$==1&&(bO.set(bR.$0),true));},ContainsValue:function(bN){return N.exists(function(bO){return bz.Equals((B.KeyValue(bO))[1],bN);},this);},ContainsKey:function(bN){var bO,bP;bO=this;bP=this.data[this.hash(bN)];return bP==null?false:M.exists(function(bQ){return bO.equals.apply(null,[(B.KeyValue(bQ))[0],bN]);},bP);},Clear:function(){this.data=[];this.count=0;},IsFixedSize:function(){return false;},Remove:function(bN){var bO,bP;bO=(bP=void 0,[this.TryGetValue(bN.K,{get:function(){return bP;},set:function(bQ){bP=bQ;}}),bP]);return bO[0]&&(bz.Equals(bO[1],bN.V)&&this.RemoveKey(bN.K));},CopyTo:function(bN,bO){J.ArrayCopyTo(M.ofSeq(this),bN,bO);},Contains:function(bN){var bO,bP;bO=(bP=void 0,[this.TryGetValue(bN.K,{get:function(){return bP;},set:function(bQ){bP=bQ;}}),bP]);return bO[0]&&bz.Equals(bO[1],bN.V);},Add:function(bN){this.DAdd(bN.K,bN.V);},Count:function(){return this.count;},IsReadOnly:function(){return false;}},j,_0);_0.New=bG.Ctor(function(bN,bO){_0.New$6.call(this,bN,X.equals(bO),function(bP){return X.getHashCode(bO,bP);});},_0);_0.New$1=bG.Ctor(function(bN){_0.New$6.call(this,bN,bz.Equals,bz.Hash);},_0);_0.New$2=bG.Ctor(function(bN,bO){_0.New$3.call(this,bO);},_0);_0.New$3=bG.Ctor(function(bN){_0.New$6.call(this,[],X.equals(bN),function(bO){return X.getHashCode(bN,bO);});},_0);_0.New$4=bG.Ctor(function(bN){_0.New$5.call(this);},_0);_0.New$5=bG.Ctor(function(){_0.New$6.call(this,[],bz.Equals,bz.Hash);},_0);_0.New$6=bG.Ctor(function(bN,bO,bP){var bQ,bR;j.New.call(this);this.equals=bO;this.hash=bP;this.count=0;this.data=[];bQ=J.Get(bN);try{while(bQ.MoveNext()){bR=bQ.Current();this.set(bR.K,bR.V);}}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}},_0);_1.withInner=function(bN,bO){var bP;bP=new e(bN);bP.inner=bO;return bP;};_2=b.MatchFailureException=bG.Class({},e,_2);_2.New=bG.Ctor(function(bN,bO,bP){this.message=bN+" at "+bJ(bO)+":"+bJ(bP);a.Object.setPrototypeOf(this,_2.prototype);},_2);_3=b.IndexOutOfRangeException=bG.Class({},e,_3);_3.New=bG.Ctor(function(){_3.New$1.call(this,"Index was outside the bounds of the array.");},_3);_3.New$1=bG.Ctor(function(bN){this.message=bN;a.Object.setPrototypeOf(this,_3.prototype);},_3);_4=b.OperationCanceledException=bG.Class({},e,_4);_4.New=bG.Ctor(function(bN){_4.New$1.call(this,"The operation was canceled.",null,bN);},_4);_4.New$1=bG.Ctor(function(bN,bO,bP){this.message=bN;this.inner=bO;a.Object.setPrototypeOf(this,_4.prototype);this.ct=bP;},_4);_5=b.ArgumentException=bG.Class({},e,_5);_5.New=bG.Ctor(function(bN,bO){_5.New$2.call(this,bO+"\nParameter name: "+bN);},_5);_5.New$1=bG.Ctor(function(){_5.New$2.call(this,"Value does not fall within the expected range.");},_5);_5.New$2=bG.Ctor(function(bN){this.message=bN;a.Object.setPrototypeOf(this,_5.prototype);},_5);_6=b.ArgumentOutOfRangeException=bG.Class({},e,_6);_6.New=bG.Ctor(function(bN,bO){this.message=bO+"\nParameter name: "+bN;a.Object.setPrototypeOf(this,_6.prototype);},_6);_6.New$1=bG.Ctor(function(bN){_6.New.call(this,bN,"Specified argument was out of the range of valid values.");},_6);_6.New$2=bG.Ctor(function(){this.message="Specified argument was out of the range of valid values.";a.Object.setPrototypeOf(this,_6.prototype);},_6);_7=b.ArgumentNullException=bG.Class({},e,_7);_7.New=bG.Ctor(function(bN,bO){this.message=bO+"\nParameter name: "+bN;a.Object.setPrototypeOf(this,_7.prototype);},_7);_7.New$1=bG.Ctor(function(bN){_7.New.call(this,bN,"Value cannot be null.");},_7);_7.New$2=bG.Ctor(function(){this.message="Value cannot be null.";a.Object.setPrototypeOf(this,_7.prototype);},_7);_8=b.InvalidOperationException=bG.Class({},e,_8);_8.New=bG.Ctor(function(bN){_8.New$2.call(this,bN,null);},_8);_8.New$1=bG.Ctor(function(){_8.New.call(this,"Operation is not valid due to the current state of the object.");},_8);_8.New$2=bG.Ctor(function(bN,bO){this.message=bN;this.inner=bO;a.Object.setPrototypeOf(this,_8.prototype);},_8);_9=b.AggregateException=bG.Class({},e,_9);_9.New=bG.Ctor(function(bN,bO){_9.New$4.call(this,bN,[bO]);},_9);_9.New$1=bG.Ctor(function(bN,bO){_9.New$4.call(this,bN,M.ofSeq(bO));},_9);_9.New$2=bG.Ctor(function(bN){_9.New$4.call(this,"One or more errors occurred.",M.ofSeq(bN));},_9);_9.New$3=bG.Ctor(function(bN){_9.New$4.call(this,"One or more errors occurred.",bN);},_9);_9.New$4=bG.Ctor(function(bN,bO){this.message=bN;a.Object.setPrototypeOf(this,_9.prototype);this.innerExceptions=bO;},_9);_=b.TimeoutException=bG.Class({},e,_);_.New=bG.Ctor(function(){_.New$1.call(this,"The operation has timed out.");},_);_.New$1=bG.Ctor(function(bN){this.message=bN;a.Object.setPrototypeOf(this,_.prototype);},_);$=b.FormatException=bG.Class({},e,$);$.New=bG.Ctor(function(){$.New$1.call(this,"One of the identified items was in an invalid format.");},$);$.New$1=bG.Ctor(function(bN){this.message=bN;a.Object.setPrototypeOf(this,$.prototype);},$);ba=b.OverflowException=bG.Class({},e,ba);ba.New=bG.Ctor(function(){ba.New$1.call(this,"Arithmetic operation resulted in an overflow.");},ba);ba.New$1=bG.Ctor(function(bN){this.message=bN;a.Object.setPrototypeOf(this,ba.prototype);},ba);bb=b.TaskCanceledException=bG.Class({},e,bb);bb.New=bG.Ctor(function(){bb.New$1.call(this,"A task was canceled.");},bb);bb.New$1=bG.Ctor(function(bN){this.message=bN;a.Object.setPrototypeOf(this,bb.prototype);},bb);bc=b.KeyNotFoundException=bG.Class({},e,bc);bc.New=bG.Ctor(function(){bc.New$1.call(this,"The given key was not present in the dictionary.");},bc);bc.New$1=bG.Ctor(function(bN){this.message=bN;a.Object.setPrototypeOf(this,bc.prototype);},bc);M.create2D=function(bN){var bO;bO=M.ofSeq(N.map(M.ofSeq,bN));bO.dims=2;return bO;};be.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bN){var bO,bP;bO=bM.random()*16|0;bP=bN=="x"?bO:bO&3|8;return bP.toString(16);});};be.TryParseExact=function(bN,bO,bP){try{bP.set(be.ParseExact(bN,bO));return true;}catch(bQ){return false;}};be.TryParse=function(bN,bO){try{bO.set(be.Parse(bN));return true;}catch(bP){return false;}};be.ParseExact=function(bN,bO){var bP,bQ,bR,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2;function bS(b3){var b4,b5,b6,b7;for(b4=0,b5=35;b4<=b5;b4++){if(b4===8||(b4===13||(b4===18||b4===23)))b3[b4]!=="-"?be.ShapeError():void 0;else{b7=b3[b4];!("0"<=b7&&b7<="9"||"a"<=b7&&b7<="f")?be.ShapeError():void 0;}}return b3;}bT=bO.toUpperCase();if(bT==="N"){bU=bt.Trim(bN).toLowerCase();if(bU.length!==32)be.ShapeError();for(bV=0,bW=31;bV<=bW;bV++){bX=bU[bV];if(!("0"<=bX&&bX<="9"||"a"<=bX&&bX<="f"))be.ShapeError();}return bt.Substring(bU,0,8)+"-"+bt.Substring(bU,8,4)+"-"+bt.Substring(bU,12,4)+"-"+bt.Substring(bU,16,4)+"-"+bU.substring(20);}else if(bT==="D"){bP=bt.Trim(bN).toLowerCase();bP.length!==36?be.ShapeError():void 0;return bS(bP);}else if(bT==="B"){bQ=bt.Trim(bN).toLowerCase();bQ.length!==38||bQ[0]!=="{"||bQ[17]!=="}"?be.ShapeError():void 0;return bS(bt.Substring(bQ,1,36));}else if(bT==="P"){bR=bt.Trim(bN).toLowerCase();bR.length!==38||bR[0]!=="("||bR[17]!==")"?be.ShapeError():void 0;return bS(bt.Substring(bR,1,36));}else if(bT==="X"){bY=bt.Trim(bN).toLowerCase();if(bY.length!==68)be.ShapeError();for(bZ=0,b0=67;bZ<=b0;bZ++){switch(bZ){case 26:case 0:if(bY[bZ]!=="{")be.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(bY[bZ]!=="0")be.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(bY[bZ]!=="x")be.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(bY[bZ]!==",")be.ShapeError();break;case 67:case 66:if(bY[bZ]!=="{")be.ShapeError();break;default:b2=bY[bZ];if(!("0"<=b2&&b2<="9"||"a"<=b2&&b2<="f"))be.ShapeError();break;}}return bt.Substring(bY,3,8)+"-"+bt.Substring(bY,14,4)+"-"+bt.Substring(bY,21,4)+"-"+bt.Substring(bY,29,2)+bt.Substring(bY,34,2)+"-"+bt.Substring(bY,39,2)+bt.Substring(bY,44,2)+bt.Substring(bY,49,2)+bt.Substring(bY,54,2)+bt.Substring(bY,59,2)+bt.Substring(bY,64,2);}else return be.FormatError();};be.Parse=function(bN){var bO,bP,bQ;try{return be.ParseExact(bN,"D");}catch(bR){try{bO=be.ParseExact(bN,"B");}catch(bS){try{bP=be.ParseExact(bN,"P");}catch(bT){try{bQ=be.ParseExact(bN,"N");}catch(bU){bQ=be.ParseExact(bN,"X");}bP=bQ;}bO=bP;}return bO;}};be.ToString=function(bN,bO){var bP;bP=bO.toUpperCase();return bP==="N"?bt.Replace(bN,"-",""):bP==="D"?bN:bP==="B"?"{"+bN+"}":bP==="P"?"("+bN+")":bP==="X"?"{0x"+bt.Substring(bN,0,8)+",0x"+bt.Substring(bN,9,4)+",0x"+bt.Substring(bN,14,4)+",{0x"+bt.Substring(bN,19,2)+",0x"+bt.Substring(bN,21,2)+",0x"+bt.Substring(bN,24,2)+",0x"+bt.Substring(bN,26,2)+",0x"+bt.Substring(bN,28,2)+",0x"+bt.Substring(bN,30,2)+",0x"+bt.Substring(bN,32,2)+",0x"+bt.Substring(bN,34,2)+"}}":be.FormatError();};be.ParseError=function(){throw new $.New$1("Unrecognized Guid format.");};be.ShapeError=function(){throw new $.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};be.HexaError=function(){throw new $.New$1("Hexadecimal Guid printing not implemented by WebSharper.");};be.FormatError=function(){throw new $.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};bf.concat=function(bN){var bO,bP;bO=[];for(var bQ in bN)bO.push.apply(bO,bN[bQ]);return bO;};bg=t.HashSet=bG.Class({GetEnumerator:function(){return J.Get(bf.concat(this.data));},Count:function(){return this.count;},SAdd:function(bN){return this.add(bN);},add:function(bN){var bO,bP;bO=this.hash(bN);bP=this.data[bO];return bP==null?(this.data[bO]=[bN],this.count=this.count+1,true):this.arrContains(bN,bP)?false:(bP.push(bN),this.count=this.count+1,true);},arrRemove:function(bN,bO){var bP,bQ,bR,bS;bP=true;bQ=0;bS=bO.length;while(bP&&bQ<bS)if(this.equals.apply(null,[bO[bQ],bN])){bO.splice.apply(bO,[bQ,1]);bP=false;}else bQ=bQ+1;return!bP;},arrContains:function(bN,bO){var bP,bQ,bR,bS;bP=true;bQ=0;bS=bO.length;while(bP&&bQ<bS)if(this.equals.apply(null,[bO[bQ],bN]))bP=false;else bQ=bQ+1;return!bP;},UnionWith:function(bN){var bO;bO=J.Get(bN);try{while(bO.MoveNext())this.SAdd(bO.Current());}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}},SymmetricExceptWith:function(bN){var bO,bP;bO=J.Get(bN);try{while(bO.MoveNext()){bP=bO.Current();if(this.Contains(bP))this.Remove(bP);else this.SAdd(bP);}}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}},SetEquals:function(bN){var bO;bO=new bg.New$4(bN,this.equals,this.hash);return this.Count()===bO.Count()&&this.IsSupersetOf(bO);},RemoveWhere:function(bN){var bO,bP,bQ,bR,bS;bP=bf.concat(this.data);bO=0;for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++){bS=bP[bQ];if(bN(bS))this.Remove(bS)?bO=bO+1:void 0;}return bO;},Remove:function(bN){var bO;bO=this.data[this.hash(bN)];return bO==null?false:this.arrRemove(bN,bO)&&(this.count=this.count-1,true);},Overlaps:function(bN){var bO;bO=this;return N.exists(function(bP){return bO.Contains(bP);},bN);},IsSupersetOf:function(bN){var bO;bO=this;return N.forall(function(bP){return bO.Contains(bP);},bN);},IsSubsetOf:function(bN){var bO;bO=new bg.New$4(bN,this.equals,this.hash);return M.forall(function(bP){return bO.Contains(bP);},bf.concat(this.data));},IsProperSupersetOf:function(bN){var bO;bO=M.ofSeq(bN);return this.count>M.length(bO)&&this.IsSupersetOf(bO);},IsProperSubsetOf:function(bN){var bO;bO=M.ofSeq(bN);return this.count<M.length(bO)&&this.IsSubsetOf(bO);},IntersectWith:function(bN){var bO,bP,bQ,bR,bS;bO=new bg.New$4(bN,this.equals,this.hash);bP=bf.concat(this.data);for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++){bS=bP[bQ];if(!bO.Contains(bS))this.Remove(bS);}},ExceptWith:function(bN){var bO;bO=J.Get(bN);try{while(bO.MoveNext())this.Remove(bO.Current());}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}},CopyTo:function(bN){var bO,bP,bQ,bR;bO=0;bP=bf.concat(this.data);for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)M.set(bN,bQ,bP[bQ]);},Contains:function(bN){var bO;bO=this.data[this.hash(bN)];return bO==null?false:this.arrContains(bN,bO);},Clear:function(){this.data=[];this.count=0;},Add:function(bN){this.SAdd(bN);},IsReadOnly:function(){return false;}},j,bg);bg.New=bG.Ctor(function(bN,bO){bg.New$4.call(this,bN,X.equals(bO),function(bP){return X.getHashCode(bO,bP);});},bg);bg.New$1=bG.Ctor(function(bN){bg.New$4.call(this,[],X.equals(bN),function(bO){return X.getHashCode(bN,bO);});},bg);bg.New$2=bG.Ctor(function(bN){bg.New$4.call(this,bN,bz.Equals,bz.Hash);},bg);bg.New$3=bG.Ctor(function(){bg.New$4.call(this,[],bz.Equals,bz.Hash);},bg);bg.New$4=bG.Ctor(function(bN,bO,bP){var bQ;j.New.call(this);this.equals=bO;this.hash=bP;this.data=[];this.count=0;bQ=J.Get(bN);try{while(bQ.MoveNext())this.add(bQ.Current());}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}},bg);bi.New=function(bN,bO,bP){return{c:bN,v:bO,f:bP};};bj.Force=function(bN){return bN.f();};bj.CreateFromValue=function(bN){return bi.New(true,bN,bj.cachedLazy);};bj.Create=function(bN){return bi.New(false,bN,bj.forceLazy);};bj.forceLazy=function(){var bN;bN=this.v();this.c=true;this.v=bN;this.f=bj.cachedLazy;return bN;};bj.cachedLazy=function(){return this.v;};bk=O.T=bG.Class({GetSlice:function(bN,bO){var bP,bQ,bR;try{return bN!=null&&bN.$==1?bO!=null&&bO.$==1?(bP=bN.$0,bQ=bO.$0,bQ<0?bk.Empty:O.ofSeq(N.take(bQ-bP+1,O.skip(bP,this)))):O.skip(bN.$0,this):bO!=null&&bO.$==1?(bR=bO.$0,bR<0?bk.Empty:O.ofSeq(N.take(bR+1,this))):this;}catch(bS){return bk.Empty;}},get_Item:function(bN){return N.nth(bN,this);},get_Length:function(){return O.length(this);},GetEnumerator:function(){return new K.New(this,null,function(bN){var bO;bO=bN.s;return bO.$==0?false:(bN.c=bO.$0,bN.s=bO.$1,true);},void 0);}},null,bk);bk.Empty=new bk({$:0});O.allPairs=function(bN,bO){return O.ofArray(M.allPairs(M.ofList(bN),M.ofList(bO)));};O.append=function(bN,bO){var bP,bQ,bR,bS,bT;if(bN.$==0)return bO;else if(bO.$==0)return bN;else{bS=new bk({$:1});bP=bS;bQ=bN;bR=true;while(bR){bP.$0=bQ.$0;bQ=bQ.$1;if(bQ.$==0)bR=false;else bP=(bT=new bk({$:1}),bP.$1=bT,bT);}bP.$1=bO;return bS;}};O.choose=function(bN,bO){return O.ofSeq(N.choose(bN,bO));};O.collect=function(bN,bO){return O.ofSeq(N.collect(bN,bO));};O.concat=function(bN){return O.ofSeq(N.concat(bN));};O.exists=function(bN,bO){var bP,bQ;bP=false;bQ=bO;while(!bP&&bQ.$==1){bP=bN(bQ.$0);bQ=bQ.$1;}return bP;};O.exists2=function(bN,bO,bP){var bQ,bR,bS;bQ=false;bR=bO;bS=bP;while(!bQ&&bR.$==1&&bS.$==1){bQ=bN(bR.$0,bS.$0);bR=bR.$1;bS=bS.$1;}if(!bQ&&(bR.$==1||bS.$==1))O.badLengths();return bQ;};O.filter=function(bN,bO){var bP,bQ,bR,bS,bT,bU;if(bO.$==0)return bO;else{bP=bk.Empty;bQ=bP;bR=bO;bS=true;while(bS){if(bN(bR.$0)){bP.$==0?(bP=new bk({$:1}),bQ=bP):bQ=(bT=new bk({$:1}),bQ.$1=bT,bT);bU=bR.$0;bQ.$=1;bQ.$0=bU;}bR=bR.$1;if(bR.$==0)bS=false;}if(!(bP.$==0))bQ.$1=bk.Empty;return bP;}};O.fold2=function(bN,bO,bP,bQ){return M.fold2(bN,bO,M.ofList(bP),M.ofList(bQ));};O.foldBack=function(bN,bO,bP){return M.foldBack(bN,M.ofList(bO),bP);};O.foldBack2=function(bN,bO,bP,bQ){return M.foldBack2(bN,M.ofList(bO),M.ofList(bP),bQ);};O.forAll=function(bN,bO){var bP,bQ;bP=true;bQ=bO;while(bP&&bQ.$==1){bP=bN(bQ.$0);bQ=bQ.$1;}return bP;};O.forall2=function(bN,bO,bP){var bQ,bR,bS;bQ=true;bR=bO;bS=bP;while(bQ&&bR.$==1&&bS.$==1){bQ=bN(bR.$0,bS.$0);bR=bR.$1;bS=bS.$1;}if(bQ&&(bR.$==1||bS.$==1))O.badLengths();return bQ;};O.head=function(bN){return bN.$==1?bN.$0:O.listEmpty();};O.init=function(bN,bO){return O.ofArray(M.init(bN,bO));};O.iter=function(bN,bO){var bP;bP=bO;while(bP.$==1){bN(O.head(bP));bP=O.tail(bP);}};O.iter2=function(bN,bO,bP){var bQ,bR;bQ=bO;bR=bP;while(bQ.$==1){bR.$==0?O.badLengths():void 0;bN(O.head(bQ),O.head(bR));bQ=O.tail(bQ);bR=O.tail(bR);}if(bR.$==1)O.badLengths();};O.iteri=function(bN,bO){var bP,bQ;bP=bO;bQ=0;while(bP.$==1){bN(bQ,O.head(bP));bP=O.tail(bP);bQ=bQ+1;}};O.iteri2=function(bN,bO,bP){var bQ,bR,bS;bQ=bO;bR=bP;bS=0;while(bQ.$==1){bR.$==0?O.badLengths():void 0;bN(bS,O.head(bQ),O.head(bR));bQ=O.tail(bQ);bR=O.tail(bR);bS=bS+1;}if(bR.$==1)O.badLengths();};O.length=function(bN){var bO,bP;bO=bN;bP=0;while(bO.$==1){bO=O.tail(bO);bP=bP+1;}return bP;};O.map=function(bN,bO){var bP,bQ,bR,bS,bT;if(bO.$==0)return bO;else{bS=new bk({$:1});bP=bS;bQ=bO;bR=true;while(bR){bP.$0=bN(bQ.$0);bQ=bQ.$1;if(bQ.$==0)bR=false;else bP=(bT=new bk({$:1}),bP.$1=bT,bT);}bP.$1=bk.Empty;return bS;}};O.map2=function(bN,bO,bP){var bQ,bR,bS,bT,bU,bV;bQ=bO.$==1&&bP.$==1;if(!bQ)return bO.$==1||bP.$==1?O.badLengths():bO;else{bU=new bk({$:1});bR=bU;bS=bO;bT=bP;while(bQ){bR.$0=bN(bS.$0,bT.$0);bS=bS.$1;bT=bT.$1;if(bS.$==1&&bT.$==1)bR=(bV=new bk({$:1}),bR.$1=bV,bV);else bQ=false;}if(bS.$==1||bT.$==1)O.badLengths();bR.$1=bk.Empty;return bU;}};O.map3=function(bN,bO,bP,bQ){var bR,bS,bT,bU,bV,bW,bX;bR=bO.$==1&&bP.$==1&&bQ.$==1;if(!bR)return bO.$==1||bP.$==1||bQ.$==1?O.badLengths():bO;else{bW=new bk({$:1});bS=bW;bT=bO;bU=bP;bV=bQ;while(bR){bS.$0=bN(bT.$0,bU.$0,bV.$0);bT=bT.$1;bU=bU.$1;bV=bV.$1;if(bT.$==1&&bU.$==1&&bV.$==1)bS=(bX=new bk({$:1}),bS.$1=bX,bX);else bR=false;}if(bT.$==1||bU.$==1||bV.$==1)O.badLengths();bS.$1=bk.Empty;return bW;}};O.mapi=function(bN,bO){var bP,bQ,bR,bS,bT,bU;if(bO.$==0)return bO;else{bT=new bk({$:1});bP=bT;bQ=bO;bR=0;bS=true;while(bS){bP.$0=bN(bR,bQ.$0);bQ=bQ.$1;if(bQ.$==0)bS=false;else{bP=(bU=new bk({$:1}),bP.$1=bU,bU);bR=bR+1;}}bP.$1=bk.Empty;return bT;}};O.mapi2=function(bN,bO,bP){var bQ,bR,bS,bT,bU,bV,bW;bQ=bO.$==1&&bP.$==1;if(!bQ)return bO.$==1||bP.$==1?O.badLengths():bO;else{bV=new bk({$:1});bR=bV;bS=bO;bT=bP;bU=0;while(bQ){bR.$0=bN(bU,bS.$0,bT.$0);bS=bS.$1;bT=bT.$1;if(bS.$==1&&bT.$==1){bR=(bW=new bk({$:1}),bR.$1=bW,bW);bU=bU+1;}else bQ=false;}if(bS.$==1||bT.$==1)O.badLengths();bR.$1=bk.Empty;return bV;}};O.max=function(bN){var bO,bP,bQ;O.nonEmpty(bN);bO=bN.$0;bP=bN.$1;while(bP.$==1){bQ=bP.$0;if(bz.Compare(bQ,bO)===1)bO=bQ;bP=bP.$1;}return bO;};O.maxBy=function(bN,bO){var bP,bQ,bR,bS,bT;O.nonEmpty(bO);bP=bO.$0;bQ=bN(bP);bR=bO.$1;while(bR.$==1){bS=bR.$0;bT=bN(bS);if(bz.Compare(bT,bQ)===1){bP=bS;bQ=bT;}bR=bR.$1;}return bP;};O.min=function(bN){var bO,bP,bQ;O.nonEmpty(bN);bO=bN.$0;bP=bN.$1;while(bP.$==1){bQ=bP.$0;if(bz.Compare(bQ,bO)===-1)bO=bQ;bP=bP.$1;}return bO;};O.minBy=function(bN,bO){var bP,bQ,bR,bS,bT;O.nonEmpty(bO);bP=bO.$0;bQ=bN(bP);bR=bO.$1;while(bR.$==1){bS=bR.$0;bT=bN(bS);if(bz.Compare(bT,bQ)===-1){bP=bS;bQ=bT;}bR=bR.$1;}return bP;};O.ofArray=function(bN){var bO,bP,bQ;bO=bk.Empty;for(bP=M.length(bN)-1,bQ=0;bP>=bQ;bP--)bO=new bk({$:1,$0:M.get(bN,bP),$1:bO});return bO;};O.ofSeq=function(bN){var bO,bP,bQ,bR,bS,bT;if(bN instanceof bk)return bN;else if(bN instanceof a.Array)return O.ofArray(bN);else{bO=J.Get(bN);try{bQ=bO.MoveNext();if(!bQ)bP=bk.Empty;else{bS=new bk({$:1});bR=bS;while(bQ){bR.$0=bO.Current();if(bO.MoveNext())bR=(bT=new bk({$:1}),bR.$1=bT,bT);else bQ=false;}bR.$1=bk.Empty;bP=bS;}return bP;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}}};O.partition=function(bN,bO){var bP;bP=M.partition(bN,M.ofList(bO));return[O.ofArray(bP[0]),O.ofArray(bP[1])];};O.permute=function(bN,bO){return O.ofArray(M.permute(bN,M.ofList(bO)));};O.reduce=function(bN,bO){var bP,bQ;O.nonEmpty(bO);bP=bO.$0;bQ=bO.$1;while(bQ.$==1){bP=bN(bP,bQ.$0);bQ=bQ.$1;}return bP;};O.reduceBack=function(bN,bO){return M.reduceBack(bN,M.ofList(bO));};O.replicate=function(bN,bO){return O.ofArray(M.create(bN,bO));};O.rev=function(bN){var bO,bP;bO=bk.Empty;bP=bN;while(bP.$==1){bO=new bk({$:1,$0:bP.$0,$1:bO});bP=bP.$1;}return bO;};O.scan=function(bN,bO,bP){return O.ofSeq(N.scan(bN,bO,bP));};O.scanBack=function(bN,bO,bP){return O.ofArray(M.scanBack(bN,M.ofList(bO),bP));};O.sort=function(bN){var bO;bO=M.ofList(bN);M.sortInPlace(bO);return O.ofArray(bO);};O.sortBy=function(bN,bO){var bP;bP=M.ofList(bO);M.sortInPlaceBy(bN,bP);return O.ofArray(bP);};O.sortByDescending=function(bN,bO){var bP;bP=M.ofList(bO);M.sortInPlaceByDescending(bN,bP);return O.ofArray(bP);};O.sortDescending=function(bN){var bO;bO=M.ofList(bN);M.sortInPlaceByDescending(a.id,bO);return O.ofArray(bO);};O.sortWith=function(bN,bO){var bP;bP=M.ofList(bO);M.sortInPlaceWith(bN,bP);return O.ofArray(bP);};O.tail=function(bN){return bN.$==1?bN.$1:O.listEmpty();};O.transpose=function(bN){return O.ofSeq(N.map(O.ofArray,M.transposeArray(M.ofSeq(N.map(M.ofList,bN)))));};O.unzip=function(bN){var bO,bP,bQ,bR;bO=[];bP=[];bQ=J.Get(bN);try{while(bQ.MoveNext()){bR=bQ.Current();bO.push(bR[0]);bP.push(bR[1]);}}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}return[O.ofArray(bO.slice(0)),O.ofArray(bP.slice(0))];};O.unzip3=function(bN){var bO,bP,bQ,bR,bS;bO=[];bP=[];bQ=[];bR=J.Get(bN);try{while(bR.MoveNext()){bS=bR.Current();bO.push(bS[0]);bP.push(bS[1]);bQ.push(bS[2]);}}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}return[O.ofArray(bO.slice(0)),O.ofArray(bP.slice(0)),O.ofArray(bQ.slice(0))];};O.zip=function(bN,bO){return O.map2(function(bP,bQ){return[bP,bQ];},bN,bO);};O.zip3=function(bN,bO,bP){return O.map3(function(bQ,bR,bS){return[bQ,bR,bS];},bN,bO,bP);};O.chunkBySize=function(bN,bO){return O.map(O.ofArray,O.ofSeq(N.chunkBySize(bN,bO)));};O.compareWith=function(bN,bO,bP){return N.compareWith(bN,bO,bP);};O.countBy=function(bN,bO){return O.ofArray(M.countBy(bN,M.ofList(bO)));};O.distinct=function(bN){return O.ofSeq(N.distinct(bN));};O.distinctBy=function(bN,bO){return O.ofSeq(N.distinctBy(bN,bO));};O.splitInto=function(bN,bO){return O.map(O.ofArray,O.ofArray(M.splitInto(bN,M.ofList(bO))));};O.except=function(bN,bO){return O.ofSeq(N.except(bN,bO));};O.tryFindBack=function(bN,bO){return M.tryFindBack(bN,M.ofList(bO));};O.findBack=function(bN,bO){var bP;bP=O.tryFindBack(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};O.findIndexBack=function(bN,bO){var bP;bP=M.tryFindIndexBack(bN,M.ofList(bO));return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};O.groupBy=function(bN,bO){var bP;function bQ(bR,bS){return[bR,O.ofArray(bS)];}bP=M.groupBy(bN,M.ofList(bO));M.mapInPlace(function(bR){return bQ(bR[0],bR[1]);},bP);return O.ofArray(bP);};O.last=function(bN){var bO,bP;O.nonEmpty(bN);bO=bN;bP=bO.$1;while(bP.$==1){bO=bP;bP=bO.$1;}return bO.$0;};O.contains=function(bN,bO){var bP,bQ;bP=false;bQ=bO;while(!bP&&bQ.$==1){bP=bz.Equals(bN,bQ.$0);bQ=bQ.$1;}return bP;};O.mapFold=function(bN,bO,bP){var bQ;bQ=M.mapFold(bN,bO,M.ofList(bP));return[O.ofArray(bQ[0]),bQ[1]];};O.mapFoldBack=function(bN,bO,bP){var bQ;bQ=M.mapFoldBack(bN,M.ofList(bO),bP);return[O.ofArray(bQ[0]),bQ[1]];};O.pairwise=function(bN){return O.ofSeq(N.pairwise(bN));};O.indexed=function(bN){return O.mapi(function(bO,bP){return[bO,bP];},bN);};O.tryHead=function(bN){return bN.$==0?null:{$:1,$0:bN.$0};};O.exactlyOne=function(bN){var bO;return bN.$==1&&(bN.$1.$==0&&(bO=bN.$0,true))?bO:B.FailWith("The input does not have precisely one element.");};O.tryExactlyOne=function(bN){var bO;return bN.$==1&&(bN.$1.$==0&&(bO=bN.$0,true))?{$:1,$0:bO}:null;};O.unfold=function(bN,bO){return O.ofSeq(N.unfold(bN,bO));};O.windowed=function(bN,bO){return O.ofSeq(N.map(O.ofArray,N.windowed(bN,bO)));};O.splitAt=function(bN,bO){return[O.ofSeq(N.take(bN,bO)),O.skip(bN,bO)];};O.insertAt=function(bN,bO,bP){return bN>=0&&bP.get_Length()>bN?bN+1===bP.get_Length()?O.append(bP,O.ofArray([bO])):bN===0?O.append(O.ofArray([bO]),bP):O.append(O.append(bP.GetSlice({$:1,$0:0},{$:1,$0:bN-1}),O.ofArray([bO])),bP.GetSlice({$:1,$0:bN},null)):B.FailWith("Incorrect index");};O.insertManyAt=function(bN,bO,bP){return bN>=0&&bP.get_Length()>bN?bN+1===bP.get_Length()?O.append(bP,O.ofSeq(bO)):bN===0?O.append(O.ofSeq(bO),bP):O.append(O.append(bP.GetSlice({$:1,$0:0},{$:1,$0:bN-1}),O.ofSeq(bO)),bP.GetSlice({$:1,$0:bN},null)):B.FailWith("Incorrect index");};O.removeAt=function(bN,bO){return bN>=0&&bO.get_Length()>bN?bN+1===bO.get_Length()?bO.GetSlice({$:1,$0:0},{$:1,$0:bN-1}):bN===0?O.tail(bO):O.append(bO.GetSlice({$:1,$0:0},{$:1,$0:bN-1}),bO.GetSlice({$:1,$0:bN+1},null)):B.FailWith("Incorrect index");};O.removeManyAt=function(bN,bO,bP){return bN+bO>=0&&bP.get_Length()>bN+bO?bN+bO===bP.get_Length()?bP.GetSlice({$:1,$0:0},{$:1,$0:bN-1}):bN===0?bP.GetSlice({$:1,$0:bO},null):O.append(bP.GetSlice({$:1,$0:0},{$:1,$0:bN-1}),bP.GetSlice({$:1,$0:bN+bO},null)):B.FailWith("Incorrect index");};O.updateAt=function(bN,bO,bP){return bN>=0&&bP.get_Length()>bN?bN+1===bP.get_Length()?O.append(bP.GetSlice({$:1,$0:0},{$:1,$0:bN-1}),O.ofArray([bO])):bN===0?O.append(O.ofArray([bO]),O.tail(bP)):O.append(O.append(bP.GetSlice({$:1,$0:0},{$:1,$0:bN-1}),O.ofArray([bO])),bP.GetSlice({$:1,$0:bN+1},null)):B.FailWith("Incorrect index");};O.nonEmpty=function(bN){if(bN.$==0)O.listEmpty();};O.listEmpty=function(){return B.FailWith("The input list was empty.");};O.badLengths=function(){return B.FailWith("The lists have different lengths.");};C.getOrValue=function(bN,bO){return bN===null?bO:bN;};C.get=function(bN){return bN===null?B.FailWith("Nullable object must have a value."):bN;};B.range=function(bN,bO){var bP;bP=1+bO-bN;return bP<=0?[]:N.init(bP,function(bQ){return bQ+bN;});};B.step=function(bN,bO,bP){var bQ;bQ=B.Sign(bO);return N.takeWhile(function(bR){return bQ*(bP-bR)>=0;},N.initInfinite(function(bR){return bN+bR*bO;}));};B.KeyValue=function(bN){return[bN.K,bN.V];};B.Sign=function(bN){return bN===0?0:bN<0?-1:1;};B.Pown=function(bN,bO){function bP(bQ){var bR;return bQ===1?bN:bQ%2===0?(bR=bP(bQ/2>>0),bR*bR):bN*bP(bQ-1);}return bP(bO);};B.toInt=function(bN){var bO;bO=B.toUInt(bN);return bO>=2147483648?bO-4294967296:bO;};B.toUInt=function(bN){return(bN<0?bM.ceil(bN):bM.floor(bN))>>>0;};B.InvalidArg=function(bN,bO){throw new _5.New(bN,bO);};B.InvalidOp=function(bN){throw new _8.New(bN);};B.FailWith=function(bN){throw new e(bN);};bl.string=function(bN,bO,bP){var bQ,bR;return bO==null?bP!=null&&bP.$==1?(bQ=bP.$0,bQ<0?"":bN.slice(0,bQ+1)):"":bP==null?bN.slice(bO.$0):(bR=bP.$0,bR<0?"":bN.slice(bO.$0,bR+1));};bl.array=function(bN,bO,bP){var bQ,bR;return bO==null?bP!=null&&bP.$==1?(bQ=bP.$0,bQ<0?[]:bN.slice(0,bQ+1)):[]:bP==null?bN.slice(bO.$0):(bR=bP.$0,bR<0?[]:bN.slice(bO.$0,bR+1));};bl.setArray=function(bN,bO,bP,bQ){var bR;bR=bO!=null&&bO.$==1?bO.$0:0;M.setSub(bN,bR,(bP!=null&&bP.$==1?bP.$0:bN.length-1)-bR+1,bQ);};bl.array2D=function(bN,bO,bP,bQ,bR){var bS,bT;bS=bO!=null&&bO.$==1?bO.$0:0;bT=bQ!=null&&bQ.$==1?bQ.$0:0;return M.sub2D(bN,bS,bT,(bP!=null&&bP.$==1?bP.$0:bN.length-1)-bS+1,(bR!=null&&bR.$==1?bR.$0:(bN.length?bN[0].length:0)-1)-bT+1);};bl.array2Dfix1=function(bN,bO,bP,bQ){var bR,bS,bT,bU,bV,bW;bR=bP!=null&&bP.$==1?bP.$0:0;bS=bQ!=null&&bQ.$==1?bQ.$0:(bN.length?bN[0].length:0)-1;bT=bS-bR+1;bU=new a.Array(bT);for(bV=0,bW=bT-1;bV<=bW;bV++)M.set(bU,bV,M.get2D(bN,bO,bR+bV));return bU;};bl.array2Dfix2=function(bN,bO,bP,bQ){var bR,bS,bT,bU,bV,bW;bR=bO!=null&&bO.$==1?bO.$0:0;bS=bP!=null&&bP.$==1?bP.$0:bN.length-1;bT=bS-bR+1;bU=new a.Array(bT);for(bV=0,bW=bT-1;bV<=bW;bV++)M.set(bU,bV,M.get2D(bN,bR+bV,bQ));return bU;};bl.setArray2Dfix1=function(bN,bO,bP,bQ,bR){var bS,bT,bU,bV;bS=bP!=null&&bP.$==1?bP.$0:0;bT=bQ!=null&&bQ.$==1?bQ.$0:(bN.length?bN[0].length:0)-1;for(bU=0,bV=bT-bS+1-1;bU<=bV;bU++)M.set2D(bN,bO,bS+bU,M.get(bR,bU));};bl.setArray2Dfix2=function(bN,bO,bP,bQ,bR){var bS,bT,bU,bV;bS=bO!=null&&bO.$==1?bO.$0:0;bT=bP!=null&&bP.$==1?bP.$0:bN.length-1;for(bU=0,bV=bT-bS+1-1;bU<=bV;bU++)M.set2D(bN,bS+bU,bQ,M.get(bR,bU));};bl.setArray2D=function(bN,bO,bP,bQ,bR,bS){var bT,bU;bT=bO!=null&&bO.$==1?bO.$0:0;bU=bQ!=null&&bQ.$==1?bQ.$0:0;M.setSub2D(bN,bT,bU,(bP!=null&&bP.$==1?bP.$0:bN.length-1)-bT+1,(bR!=null&&bR.$==1?bR.$0:(bN.length?bN[0].length:0)-1)-bU+1,bS);};bm.filter=function(bN,bO){var bP;return bO!=null&&bO.$==1&&(bN(bO.$0)&&(bP=bO.$0,true))?bO:null;};bm.fold=function(bN,bO,bP){return bP==null?bO:bN(bO,bP.$0);};bm.foldBack=function(bN,bO,bP){return bO==null?bP:bN(bO.$0,bP);};bm.ofNullable=function(bN){return bN==null?null:{$:1,$0:C.get(bN)};};bm.ofObj=function(bN){return bN==null?null:{$:1,$0:bN};};bm.toArray=function(bN){return bN==null?[]:[bN.$0];};bm.toList=function(bN){return bN==null?bk.Empty:O.ofArray([bN.$0]);};bm.toNullable=function(bN){return bN!=null&&bN.$==1?bN.$0:null;};bm.toObj=function(bN){return bN==null?null:bN.$0;};bn.CopyTo=function(bN,bO,bP){M.blit(bN,0,bO,bP,M.length(bN));};bn.Contains=function(bN,bO){return N.exists(function(bP){return bz.Equals(bO,bP);},bN);};bn.Clear=function(bN){bN.splice(0,M.length(bN));};bo=b.Random=bG.Class({NextBytes:function(bN){var bO,bP;for(bO=0,bP=M.length(bN)-1;bO<=bP;bO++)M.set(bN,bO,bM.floor(bM.random()*256));},Next:function(bN,bO){return bN>bO?B.FailWith("'minValue' cannot be greater than maxValue."):bN+bM.floor(bM.random()*(bO-bN));},Next$1:function(bN){return bN<0?B.FailWith("'maxValue' must be greater than zero."):bM.floor(bM.random()*bN);},Next$2:function(){return bM.floor(bM.random()*2147483648);}},j,bo);bo.New=bG.Ctor(function(){j.New.call(this);},bo);bp.New=function(bN){return[bN];};bq.MapError=function(bN,bO){return bO.$==1?{$:1,$0:bN(bO.$0)}:{$:0,$0:bO.$0};};bq.Map=function(bN,bO){return bO.$==1?{$:1,$0:bO.$0}:{$:0,$0:bN(bO.$0)};};bq.Bind=function(bN,bO){return bO.$==1?{$:1,$0:bO.$0}:bN(bO.$0);};N.enumFinally=function(bN,bO){return{GetEnumerator:function(){var bP;try{bP=J.Get(bN);}catch(bQ){bO();throw bQ;}return new K.New(null,null,function(bR){return bP.MoveNext()&&(bR.c=bP.Current(),true);},function(){bP.Dispose();bO();});}};};N.enumUsing=function(bN,bO){return{GetEnumerator:function(){var bP,bQ;try{bP=J.Get(bO(bN));}catch(bR){bQ=bN;bQ.Dispose();throw bR;}return new K.New(null,null,function(bS){return bP.MoveNext()&&(bS.c=bP.Current(),true);},function(){var bS;bP.Dispose();bS=bN;bS.Dispose();});}};};N.enumWhile=function(bN,bO){return{GetEnumerator:function(){function bP(bQ){var bR;while(true){bR=bQ.s;if(bz.Equals(bR,null)){if(bN()){bQ.s=J.Get(bO);bQ=bQ;}else return false;}else if(bR.MoveNext()){bQ.c=bR.Current();return true;}else{bR.Dispose();bQ.s=null;bQ=bQ;}}}return new K.New(null,null,bP,function(bQ){var bR;bR=bQ.s;if(!bz.Equals(bR,null))bR.Dispose();});}};};br.createEvent=function(bN,bO,bP){var bQ;bQ={AddHandler:bN,RemoveHandler:bO,Subscribe:function(bR){var bS;bS=bP(function(){return function(bT){return bR.OnNext(bT);};});bN(bS);return{Dispose:function(){return bO(bS);}};}};j.New.call(bQ);return bQ;};N.allPairs=function(bN,bO){var bP;bP=N.cache(bO);return N.collect(function(bQ){return N.map(function(bR){return[bQ,bR];},bP);},bN);};N.append=function(bN,bO){return{GetEnumerator:function(){var bP,bQ;bP=J.Get(bN);bQ=[true];return new K.New(bP,null,function(bR){var bS;return bR.s.MoveNext()?(bR.c=bR.s.Current(),true):(bS=bR.s,!bz.Equals(bS,null)?bS.Dispose():void 0,bR.s=null,bQ[0]&&(bQ[0]=false,bR.s=J.Get(bO),bR.s.MoveNext()?(bR.c=bR.s.Current(),true):(bR.s.Dispose(),bR.s=null,false)));},function(bR){var bS;bS=bR.s;if(!bz.Equals(bS,null))bS.Dispose();});}};};N.average=function(bN){var bO,bP;bO=N.fold(function(bQ,bR){return(function(bS){var bT,bU;bT=bS[0];bU=bS[1];return function(bV){return[bT+1,bU+bV];};}(bQ))(bR);},[0,0],bN);bP=bO[0];return bP===0?N.seqEmpty():bO[1]/bP;};N.averageBy=function(bN,bO){var bP,bQ;bP=N.fold(function(bR,bS){return(function(bT){var bU,bV;bU=bT[0];bV=bT[1];return function(bW){return[bU+1,bV+bN(bW)];};}(bR))(bS);},[0,0],bO);bQ=bP[0];return bQ===0?N.seqEmpty():bP[1]/bQ;};N.cache=function(bN){var bO,bP;bO=[];bP=[J.Get(bN)];return{GetEnumerator:function(){return new K.New(0,null,function(bQ){var bR;return bQ.s<bO.length?(bQ.c=bO[bQ.s],bQ.s=bQ.s+1,true):(bR=bP[0],bz.Equals(bR,null)?false:bR.MoveNext()?(bQ.s=bQ.s+1,bQ.c=bR.Current(),bO.push(bQ.c),true):(bR.Dispose(),bP[0]=null,false));},void 0);}};};N.choose=function(bN,bO){return N.collect(function(bP){var bQ;bQ=bN(bP);return bQ==null?bk.Empty:O.ofArray([bQ.$0]);},bO);};N.collect=function(bN,bO){return N.concat(N.map(bN,bO));};N.compareWith=function(bN,bO,bP){var bQ,bR,bS,bT,bU;bQ=J.Get(bO);try{bS=J.Get(bP);try{bT=0;bU=true;while(bU&&bT===0)if(bQ.MoveNext())bT=bS.MoveNext()?bN(bQ.Current(),bS.Current()):1;else if(bS.MoveNext())bT=-1;else bU=false;bR=bT;}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.concat=function(bN){return{GetEnumerator:function(){var bO;function bP(bQ){var bR;while(true){bR=bQ.s;if(bz.Equals(bR,null)){if(bO.MoveNext()){bQ.s=J.Get(bO.Current());bQ=bQ;}else{bO.Dispose();return false;}}else if(bR.MoveNext()){bQ.c=bR.Current();return true;}else{bQ.Dispose();bQ.s=null;bQ=bQ;}}}bO=J.Get(bN);return new K.New(null,null,bP,function(bQ){var bR;bR=bQ.s;if(!bz.Equals(bR,null))bR.Dispose();if(!bz.Equals(bO,null))bO.Dispose();});}};};N.countBy=function(bN,bO){return N.delay(function(){return M.countBy(bN,M.ofSeq(bO));});};N.delay=function(bN){return{GetEnumerator:function(){return J.Get(bN());}};};N.distinct=function(bN){return N.distinctBy(a.id,bN);};N.distinctBy=function(bN,bO){return{GetEnumerator:function(){var bP,bQ;bP=J.Get(bO);bQ=new bg.New$3();return new K.New(null,null,function(bR){var bS,bT;if(bP.MoveNext()){bS=bP.Current();bT=bQ.SAdd(bN(bS));while(!bT&&bP.MoveNext()){bS=bP.Current();bT=bQ.SAdd(bN(bS));}return bT&&(bR.c=bS,true);}else return false;},function(){bP.Dispose();});}};};N.splitInto=function(bN,bO){bN<=0?B.FailWith("Count must be positive"):void 0;return N.delay(function(){return M.splitInto(bN,M.ofSeq(bO));});};N.exactlyOne=function(bN){var bO,bP;bO=J.Get(bN);try{return bO.MoveNext()?(bP=bO.Current(),bO.MoveNext()?B.InvalidOp("Sequence contains more than one element"):bP):B.InvalidOp("Sequence contains no elements");}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.tryExactlyOne=function(bN){var bO,bP;bO=J.Get(bN);try{return bO.MoveNext()?(bP=bO.Current(),bO.MoveNext()?null:{$:1,$0:bP}):null;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.exists=function(bN,bO){var bP,bQ;bP=J.Get(bO);try{bQ=false;while(!bQ&&bP.MoveNext())bQ=bN(bP.Current());return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.exists2=function(bN,bO,bP){var bQ,bR,bS,bT;bQ=J.Get(bO);try{bS=J.Get(bP);try{bT=false;while(!bT&&bQ.MoveNext()&&bS.MoveNext())bT=bN(bQ.Current(),bS.Current());bR=bT;}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.filter=function(bN,bO){return{GetEnumerator:function(){var bP;bP=J.Get(bO);return new K.New(null,null,function(bQ){var bR,bS,bT;bR=bP.MoveNext();bS=void 0;bT=false;while(bR){bS=bP.Current();bN(bS)?(bQ.c=bS,bT=true,bR=false):!bP.MoveNext()?bR=false:void 0;}return bT;},function(){bP.Dispose();});}};};N.find=function(bN,bO){var bP;bP=N.tryFind(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};N.findIndex=function(bN,bO){var bP;bP=N.tryFindIndex(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};N.fold=function(bN,bO,bP){var bQ,bR;bQ=bO;bR=J.Get(bP);try{while(bR.MoveNext())bQ=bN(bQ,bR.Current());return bQ;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};N.forall=function(bN,bO){return!N.exists(function(bP){return!bN(bP);},bO);};N.forall2=function(bN,bO,bP){return!N.exists2(function(bQ,bR){return!bN(bQ,bR);},bO,bP);};N.groupBy=function(bN,bO){return N.delay(function(){return M.groupBy(bN,M.ofSeq(bO));});};N.head=function(bN){var bO;bO=J.Get(bN);try{return bO.MoveNext()?bO.Current():N.insufficient();}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.init=function(bN,bO){return N.take(bN,N.initInfinite(bO));};N.initInfinite=function(bN){return{GetEnumerator:function(){return new K.New(0,null,function(bO){bO.c=bN(bO.s);bO.s=bO.s+1;return true;},void 0);}};};N.isEmpty=function(bN){var bO;bO=J.Get(bN);try{return!bO.MoveNext();}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.iter=function(bN,bO){var bP;bP=J.Get(bO);try{while(bP.MoveNext())bN(bP.Current());}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.iter2=function(bN,bO,bP){var bQ,bR,bS;bQ=J.Get(bO);try{bS=J.Get(bP);try{while(bQ.MoveNext()&&bS.MoveNext())bN(bQ.Current(),bS.Current());bR=void 0;}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.iteri=function(bN,bO){var bP,bQ;bP=0;bQ=J.Get(bO);try{while(bQ.MoveNext()){bN(bP,bQ.Current());bP=bP+1;}}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.length=function(bN){var bO,bP;bO=0;bP=J.Get(bN);try{while(bP.MoveNext())bO=bO+1;return bO;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.map=function(bN,bO){return{GetEnumerator:function(){var bP;bP=J.Get(bO);return new K.New(null,null,function(bQ){return bP.MoveNext()&&(bQ.c=bN(bP.Current()),true);},function(){bP.Dispose();});}};};N.mapi=function(bN,bO){return N.map2(bN,N.initInfinite(a.id),bO);};N.map2=function(bN,bO,bP){return{GetEnumerator:function(){var bQ,bR;bQ=J.Get(bO);bR=J.Get(bP);return new K.New(null,null,function(bS){return bQ.MoveNext()&&bR.MoveNext()&&(bS.c=bN(bQ.Current(),bR.Current()),true);},function(){bQ.Dispose();bR.Dispose();});}};};N.maxBy=function(bN,bO){var bP,bQ,bR,bS,bT;bP=J.Get(bO);try{if(!bP.MoveNext())N.seqEmpty();bQ=bP.Current();bR=bN(bQ);while(bP.MoveNext()){bS=bP.Current();bT=bN(bS);if(bz.Compare(bT,bR)===1){bQ=bS;bR=bT;}}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.minBy=function(bN,bO){var bP,bQ,bR,bS,bT;bP=J.Get(bO);try{if(!bP.MoveNext())N.seqEmpty();bQ=bP.Current();bR=bN(bQ);while(bP.MoveNext()){bS=bP.Current();bT=bN(bS);if(bz.Compare(bT,bR)===-1){bQ=bS;bR=bT;}}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.max=function(bN){var bO,bP,bQ;bO=J.Get(bN);try{if(!bO.MoveNext())N.seqEmpty();bP=bO.Current();while(bO.MoveNext()){bQ=bO.Current();if(bz.Compare(bQ,bP)===1)bP=bQ;}return bP;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.min=function(bN){var bO,bP,bQ;bO=J.Get(bN);try{if(!bO.MoveNext())N.seqEmpty();bP=bO.Current();while(bO.MoveNext()){bQ=bO.Current();if(bz.Compare(bQ,bP)===-1)bP=bQ;}return bP;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.nth=function(bN,bO){var bP,bQ;if(bN<0)B.FailWith("negative index requested");bP=-1;bQ=J.Get(bO);try{while(bP<bN){!bQ.MoveNext()?N.insufficient():void 0;bP=bP+1;}return bQ.Current();}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.pairwise=function(bN){return N.map(function(bO){return[M.get(bO,0),M.get(bO,1)];},N.windowed(2,bN));};N.pick=function(bN,bO){var bP;bP=N.tryPick(bN,bO);return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};N.readOnly=function(bN){return{GetEnumerator:function(){return J.Get(bN);}};};N.reduce=function(bN,bO){var bP,bQ;bP=J.Get(bO);try{if(!bP.MoveNext())N.seqEmpty();bQ=bP.Current();while(bP.MoveNext())bQ=bN(bQ,bP.Current());return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.scan=function(bN,bO,bP){return{GetEnumerator:function(){var bQ;bQ=J.Get(bP);return new K.New(false,null,function(bR){return bR.s?bQ.MoveNext()&&(bR.c=bN(bR.c,bQ.Current()),true):(bR.c=bO,bR.s=true,true);},function(){bQ.Dispose();});}};};N.skip=function(bN,bO){return{GetEnumerator:function(){var bP;bP=J.Get(bO);return new K.New(true,null,function(bQ){var bR,bS;if(bQ.s){for(bR=1,bS=bN;bR<=bS;bR++)if(!bP.MoveNext())N.insufficient();bQ.s=false;}else null;return bP.MoveNext()&&(bQ.c=bP.Current(),true);},function(){bP.Dispose();});}};};N.skipWhile=function(bN,bO){return{GetEnumerator:function(){var bP;bP=J.Get(bO);return new K.New(true,null,function(bQ){var bR,bS;if(bQ.s){bR=true;bS=false;while(bR)if(bP.MoveNext()){if(!bN(bP.Current()))bR=false;}else{bR=false;bS=true;}bQ.s=false;return bS?false:(bQ.c=bP.Current(),true);}else return bP.MoveNext()&&(bQ.c=bP.Current(),true);},function(){bP.Dispose();});}};};N.sort=function(bN){return N.sortBy(a.id,bN);};N.sortBy=function(bN,bO){return N.delay(function(){var bP;bP=M.ofSeq(bO);M.sortInPlaceBy(bN,bP);return bP;});};N.sortByDescending=function(bN,bO){return N.delay(function(){var bP;bP=M.ofSeq(bO);M.sortInPlaceByDescending(bN,bP);return bP;});};N.sortDescending=function(bN){return N.sortByDescending(a.id,bN);};N.sum=function(bN){return N.fold(function(bO,bP){return bO+bP;},0,bN);};N.sumBy=function(bN,bO){return N.fold(function(bP,bQ){return bP+bN(bQ);},0,bO);};N.take=function(bN,bO){bN<0?N.nonNegative():void 0;return{GetEnumerator:function(){var bP;bP=[J.Get(bO)];return new K.New(0,null,function(bQ){var bR;bQ.s=bQ.s+1;return bQ.s>bN?false:(bR=bP[0],bz.Equals(bR,null)?N.insufficient():bR.MoveNext()?(bQ.c=bR.Current(),bQ.s===bN?(bR.Dispose(),bP[0]=null):void 0,true):(bR.Dispose(),bP[0]=null,N.insufficient()));},function(){var bQ;bQ=bP[0];if(!bz.Equals(bQ,null))bQ.Dispose();});}};};N.takeWhile=function(bN,bO){return N.delay(function(){return N.enumUsing(J.Get(bO),function(bP){return N.enumWhile(function(){return bP.MoveNext()&&bN(bP.Current());},N.delay(function(){return[bP.Current()];}));});});};N.transpose=function(bN){return N.delay(function(){return M.transposeArray(M.ofSeq(N.map(M.ofSeq,bN)));});};N.truncate=function(bN,bO){return N.delay(function(){return N.enumUsing(J.Get(bO),function(bP){var bQ;bQ=[0];return N.enumWhile(function(){return bP.MoveNext()&&bQ[0]<bN;},N.delay(function(){bQ[0]++;return[bP.Current()];}));});});};N.tryFind=function(bN,bO){var bP,bQ,bR;bP=J.Get(bO);try{bQ=null;while(bQ==null&&bP.MoveNext()){bR=bP.Current();if(bN(bR))bQ={$:1,$0:bR};}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.findBack=function(bN,bO){var bP;bP=M.tryFindBack(bN,M.ofSeq(bO));return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};N.tryFindIndex=function(bN,bO){var bP,bQ,bR;bP=J.Get(bO);try{bQ=true;bR=0;while(bQ&&bP.MoveNext())if(bN(bP.Current()))bQ=false;else bR=bR+1;return bQ?null:{$:1,$0:bR};}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.findIndexBack=function(bN,bO){var bP;bP=M.tryFindIndexBack(bN,M.ofSeq(bO));return bP==null?B.FailWith("KeyNotFoundException"):bP.$0;};N.tryPick=function(bN,bO){var bP,bQ;bP=J.Get(bO);try{bQ=null;while(bz.Equals(bQ,null)&&bP.MoveNext())bQ=bN(bP.Current());return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.unfold=function(bN,bO){return{GetEnumerator:function(){return new K.New(bO,null,function(bP){var bQ;bQ=bN(bP.s);return bQ==null?false:(bP.c=bQ.$0[0],bP.s=bQ.$0[1],true);},void 0);}};};N.windowed=function(bN,bO){bN<=0?B.FailWith("The input must be positive."):void 0;return N.delay(function(){return N.enumUsing(J.Get(bO),function(bP){var bQ;bQ=[];return N.append(N.enumWhile(function(){return bQ.length<bN&&bP.MoveNext();},N.delay(function(){bQ.push(bP.Current());return[];})),N.delay(function(){return bQ.length===bN?N.append([bQ.slice(0)],N.delay(function(){return N.enumWhile(function(){return bP.MoveNext();},N.delay(function(){bQ.shift();bQ.push(bP.Current());return[bQ.slice(0)];}));})):[];}));});});};N.zip=function(bN,bO){return N.map2(function(bP,bQ){return[bP,bQ];},bN,bO);};N.map3=function(bN,bO,bP,bQ){return{GetEnumerator:function(){var bR,bS,bT;bR=J.Get(bO);bS=J.Get(bP);bT=J.Get(bQ);return new K.New(null,null,function(bU){return bR.MoveNext()&&bS.MoveNext()&&bT.MoveNext()&&(bU.c=bN(bR.Current(),bS.Current(),bT.Current()),true);},function(){bR.Dispose();bS.Dispose();bT.Dispose();});}};};N.zip3=function(bN,bO,bP){return N.map3(function(bQ,bR,bS){return[bQ,bR,bS];},bN,bO,bP);};N.fold2=function(bN,bO,bP,bQ){return M.fold2(bN,bO,M.ofSeq(bP),M.ofSeq(bQ));};N.foldBack=function(bN,bO,bP){return M.foldBack(bN,M.ofSeq(bO),bP);};N.foldBack2=function(bN,bO,bP,bQ){return M.foldBack2(bN,M.ofSeq(bO),M.ofSeq(bP),bQ);};N.iteri2=function(bN,bO,bP){var bQ,bR,bS,bT;bQ=0;bR=J.Get(bO);try{bT=J.Get(bP);try{while(bR.MoveNext()&&bT.MoveNext()){bN(bQ,bR.Current(),bT.Current());bQ=bQ+1;}bS=void 0;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}bS;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};N.mapi2=function(bN,bO,bP){return N.map3(bN,N.initInfinite(a.id),bO,bP);};N.mapFold=function(bN,bO,bP){return M.mapFold(bN,bO,M.ofSeq(bP));};N.mapFoldBack=function(bN,bO,bP){return M.mapFoldBack(bN,M.ofSeq(bO),bP);};N.permute=function(bN,bO){return N.delay(function(){return M.permute(bN,M.ofSeq(bO));});};N.reduceBack=function(bN,bO){return M.reduceBack(bN,M.ofSeq(bO));};N.replicate=function(bN,bO){bN<0?N.nonNegative():void 0;return N.delay(function(){return N.map(function(){return bO;},B.range(0,bN-1));});};N.rev=function(bN){return N.delay(function(){return M.ofSeq(bN).slice().reverse();});};N.scanBack=function(bN,bO,bP){return N.delay(function(){return M.scanBack(bN,M.ofSeq(bO),bP);});};N.indexed=function(bN){return N.mapi(function(bO,bP){return[bO,bP];},bN);};N.sortWith=function(bN,bO){return N.delay(function(){var bP;bP=M.ofSeq(bO);M.sortInPlaceWith(bN,bP);return bP;});};N.tail=function(bN){return N.skip(1,bN);};N.insertAt=function(bN,bO,bP){return bN>=0&&N.length(bP)>bN?bN+1===N.length(bP)?N.append(bP,[bO]):bN===0?N.append([bO],bP):{GetEnumerator:function(){var bQ,bR;bQ=J.Get(bP);bR=0;return new K.New(null,null,function(bS){return bR===bN?(bS.c=bO,bR=bR+1,true):(bR=bR+1,bQ.MoveNext()&&(bS.c=bQ.Current(),true));},function(){bQ.Dispose();});}}:B.FailWith("Incorrect index");};N.insertManyAt=function(bN,bO,bP){return bN>=0&&N.length(bP)>bN?bN+1===N.length(bP)?N.append(bP,bO):bN===0?N.append(bO,bP):{GetEnumerator:function(){var bQ,bR,bS;bQ=J.Get(bP);bR=J.Get(bO);bS=0;return new K.New(null,null,function(bT){return bS===bN?bR.MoveNext()?(bT.c=bR.Current(),true):(bS=bS+1,bQ.MoveNext()&&(bT.c=bQ.Current(),true)):(bS=bS+1,bQ.MoveNext()&&(bT.c=bQ.Current(),true));},function(){bQ.Dispose();bR.Dispose();});}}:B.FailWith("Incorrect index");};N.removeAt=function(bN,bO){return bN>=0&&N.length(bO)>bN?bN+1===N.length(bO)?N.take(bN,bO):bN===0?N.tail(bO):{GetEnumerator:function(){var bP,bQ;bP=J.Get(bO);bQ=0;return new K.New(null,null,function(bR){return bQ===bN?(bQ=bQ+1,bP.MoveNext()&&(bP.MoveNext()&&(bR.c=bP.Current(),true))):(bQ=bQ+1,bP.MoveNext()&&(bR.c=bP.Current(),true));},function(){bP.Dispose();});}}:B.FailWith("Incorrect index");};N.removeManyAt=function(bN,bO,bP){return bN+bO>=0&&N.length(bP)>bN+bO?bN+bO===N.length(bP)?N.take(bN,bP):bN===0?N.skip(bO,bP):{GetEnumerator:function(){var bQ,bR,bS;bQ=J.Get(bP);bR=0;bS=bO;return new K.New(null,null,function(bT){if(bR===bN){while(bS>0&&bQ.MoveNext())bS=bS-1;bR=bR+1;return bQ.MoveNext()&&(bT.c=bQ.Current(),true);}else{bR=bR+1;return bQ.MoveNext()&&(bT.c=bQ.Current(),true);}},function(){bQ.Dispose();});}}:B.FailWith("Incorrect index");};N.updateAt=function(bN,bO,bP){return bN>=0&&N.length(bP)>bN?bN+1===N.length(bP)?N.append(N.take(bN,bP),[bO]):bN===0?N.append([bO],N.tail(bP)):{GetEnumerator:function(){var bQ,bR;bQ=J.Get(bP);bR=0;return new K.New(null,null,function(bS){return bR===bN?bQ.MoveNext()&&(bS.c=bO,bR=bR+1,true):(bR=bR+1,bQ.MoveNext()&&(bS.c=bQ.Current(),true));},function(){bQ.Dispose();});}}:B.FailWith("Incorrect index");};N.seqEmpty=function(){return B.FailWith("The input sequence was empty.");};bs.CopyTo=function(bN,bO,bP){M.blit(bO,0,bO,bP,M.length(bN));};bs.Contains=function(bN,bO){return N.exists(function(bP){return bz.Equals(bO,bP);},bN);};bs.Clear=function(bN){bN.splice(0,M.length(bN));};bt.RegexEscape=function(bN){return bN.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bt.SplitWith=function(bN,bO){return bN.split(bO);};bt.Join=function(bN,bO){return bO.join(bN);};bt.TrimEndWS=function(bN){return bN.replace(new a.RegExp("\\s+$"),"");};bt.TrimStartWS=function(bN){return bN.replace(new a.RegExp("^\\s+"),"");};bt.Trim=function(bN){return bN.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};bt.StartsWith=function(bN,bO){return bN.substring(0,bO.length)==bO;};bt.Substring=function(bN,bO,bP){return bN.substr(bO,bP);};bt.ReplaceOnce=function(bN,bO,bP){return bN.replace(bO,bP);};bt.Remove=function(bN,bO,bP){return bN.substring(0,bO)+bN.substring(bO+bP);};bt.PadRightWith=function(bN,bO,bP){return bO>bN.length?bN+a.Array(bO-bN.length+1).join(bP):bN;};bt.PadLeftWith=function(bN,bO,bP){return bO>bN.length?a.Array(bO-bN.length+1).join(bP)+bN:bN;};bt.LastIndexOf=function(bN,bO,bP){return bN.lastIndexOf(bO,bP);};bt.IsNullOrWhiteSpace=function(bN){return bN==null||(new a.RegExp("^\\s*$")).test(bN);};bt.IsNullOrEmpty=function(bN){return bN==null||bN=="";};bt.Insert=function(bN,bO,bP){return bN.substring(0,bO-1)+bP+bN.substring(bO);};bt.IndexOf=function(bN,bO,bP){return bN.indexOf(bO,bP);};bt.EndsWith=function(bN,bO){return bN.substring(bN.length-bO.length)==bO;};bt.collect=function(bN,bO){return M.init(bO.length,function(bP){return bN(bO[bP]);}).join("");};bt.concat=function(bN,bO){return M.ofSeq(bO).join(bN);};bt.exists=function(bN,bO){return N.exists(bN,bt.protect(bO));};bt.forall=function(bN,bO){return N.forall(bN,bt.protect(bO));};bt.init=function(bN,bO){return M.init(bN,bO).join("");};bt.iter=function(bN,bO){N.iter(bN,bt.protect(bO));};bt.iteri=function(bN,bO){N.iteri(bN,bt.protect(bO));};bt.length=function(bN){return bt.protect(bN).length;};bt.map=function(bN,bO){return bt.collect(bN,bt.protect(bO));};bt.mapi=function(bN,bO){return M.ofSeq(N.mapi(bN,bO)).join("");};bt.replicate=function(bN,bO){return M.create(bN,bO).join("");};bt.protect=function(bN){return bN===null?"":bN;};bt.SFormat=function(bN,bO){return bN.replace(new a.RegExp("{(0|[1-9]\\d*)(?:,(-?[1-9]\\d*|0))?(?::(.*?))?}","g"),function(bP,bQ,bR){var bS,bT,bU;bS=bJ(M.get(bO,+bQ));return!bz.Equals(bR,void 0)?(bT=+bR,(bU=bM.abs(bT),bU>bS.length?bT>0?bt.PadLeft(bS,bU):bt.PadRight(bS,bU):bS)):bS;});};bt.Filter=function(bN,bO){return M.ofSeq(N.choose(function(bP){return bN(bP)?{$:1,$0:bP}:null;},bO)).join("");};bt.SplitStrings=function(bN,bO,bP){return bt.Split(bN,new a.RegExp(bt.concat("|",M.map(bt.RegexEscape,bO))),bP);};bt.SplitChars=function(bN,bO,bP){return bt.Split(bN,new a.RegExp("["+bt.RegexEscape(bO.join(""))+"]"),bP);};bt.Split=function(bN,bO,bP){return bP===1?M.filter(function(bQ){return bQ!=="";},bt.SplitWith(bN,bO)):bt.SplitWith(bN,bO);};bt.TrimEnd=function(bN,bO){var bP,bQ;if(bz.Equals(bO,null)||bO.length==0)return bt.TrimEndWS(bN);else{bP=bN.length-1;bQ=true;while(bP>=0&&bQ)(function(){var bR;bR=bN[bP];return M.exists(function(bS){return bR===bS;},bO)?void(bP=bP-1):void(bQ=false);}());return bt.Substring(bN,0,bP+1);}};bt.TrimStart=function(bN,bO){var bP,bQ;if(bz.Equals(bO,null)||bO.length==0)return bt.TrimStartWS(bN);else{bP=0;bQ=true;while(bP<bN.length&&bQ)(function(){var bR;bR=bN[bP];return M.exists(function(bS){return bR===bS;},bO)?void(bP=bP+1):void(bQ=false);}());return bN.substring(bP);}};bt.ToCharArrayRange=function(bN,bO,bP){return M.init(bP,function(bQ){return bN[bO+bQ];});};bt.ToCharArray=function(bN){return M.init(bN.length,function(bO){return bN[bO];});};bt.ReplaceChar=function(bN,bO,bP){return bt.Replace(bN,bO,bP);};bt.Replace=function(bN,bO,bP){function bQ(bR){var bS,bT,bU;bS=bR.indexOf(bO);return bS!==-1?(bT=bt.ReplaceOnce(bR,bO,bP),(bU=bS+bP.length,bt.Substring(bT,0,bS+bP.length)+bQ(bT.substring(bU)))):bR;}return bQ(bN);};bt.PadRight=function(bN,bO){return bt.PadRightWith(bN,bO," ");};bt.PadLeft=function(bN,bO){return bt.PadLeftWith(bN,bO," ");};bt.CopyTo=function(bN,bO,bP,bQ,bR){M.blit(bt.ToCharArray(bN),bO,bP,bQ,bR);};bt.Compare=function(bN,bO){return bz.Compare(bN,bO);};bu=b.Task=bG.Class({Start:function(){var bN;bN=this;if(bz.Equals(this.status,0)){this.status=2;E.scheduler().Fork(function(){var bO;bN.status=3;try{bN.Execute();bN.status=5;}catch(bP){if(bP instanceof _4&&(bz.Equals(bP.ct,bN.token)&&(bO=bP,true))){bL.log("Task cancellation caught:",bO);bN.exc=new _9.New$3([bO]);bN.status=6;}else{bL.log("Task error caught:",bP);bN.exc=new _9.New$3([bP]);bN.status=7;}}bN.RunContinuations();});}else B.InvalidOp("Task not in initial state");},StartContinuation:function(){var bN;bN=this;if(bz.Equals(this.status,1)){this.status=2;E.scheduler().Fork(function(){if(bz.Equals(bN.status,2)){bN.status=3;try{bN.Execute();bN.status=5;}catch(bO){bN.exc=new _9.New$3([bO]);bN.status=7;}bN.RunContinuations();}});}},ContinueWith:function(bN,bO){var bP,bQ;bP=this;bQ=new bv.New$4(function(){return bN(bP);},bO,1,null,void 0);if(this.get_IsCompleted())bQ.StartContinuation();else this.continuations.push(bQ);return bQ;},ContinueWith$1:function(bN,bO){var bP,bQ;bP=this;bQ=new bu.New$4(function(){return bN(bP);},bO,1,null);if(this.get_IsCompleted())bQ.StartContinuation();else this.continuations.push(bQ);return bQ;},RunContinuations:function(){var bN,bO,bP;bN=this.continuations;for(bO=0,bP=bN.length-1;bO<=bP;bO++)M.get(bN,bO).StartContinuation();},OnCompleted:function(bN){if(this.get_IsCompleted())bN();else{bz.Equals(this.get_Status(),0)?this.Start():void 0;this.ContinueWith$1(function(){return bN();},E.noneCT());}},get_Status:function(){return this.status;},get_IsFaulted:function(){return bz.Equals(this.status,7);},get_IsCompleted:function(){return bz.Equals(this.status,5)||bz.Equals(this.status,7)||bz.Equals(this.status,6);},get_IsCanceled:function(){return bz.Equals(this.status,6);},get_Exception:function(){return this.exc;},Execute:function(){this.action();}},j,bu);bu.Yield=function(){return new bu.New$3(function(){return null;});};bu.WhenAll=function(bN){var bO,bP,bQ,bR,bS,bT;bO=M.length(bN);bP=[0];bQ=new a.Array(bO);bR=new bw.New();for(bS=0,bT=bO-1;bS<=bT;bS++)(function(bU){M.get(bN,bS).ContinueWith$1(function(bV){return bV.get_IsFaulted()?void bR.TrySetException$1(bV.get_Exception()):bV.get_IsCanceled()?void bR.TrySetCanceled$1():(bP[0]++,bQ[bU]=bV.get_Result(),bP[0]===bO?bR.SetResult(bQ):null);},E.noneCT());}(bS));return bR.get_Task();};bu.WhenAll$1=function(bN){var bO,bP,bQ,bR,bS;bO=M.length(bN);bP=[0];bQ=new bw.New();for(bR=0,bS=bO-1;bR<=bS;bR++)M.get(bN,bR).ContinueWith$1(function(bT){return bT.get_IsFaulted()?void bQ.TrySetException$1(bT.get_Exception()):bT.get_IsCanceled()?void bQ.TrySetCanceled$1():(bP[0]++,bP[0]===bO?void bQ.TrySetResult():null);},E.noneCT());return bQ.get_Task();};bu.WhenAny=function(bN){var bO,bP,bQ;bO=new bw.New();for(bP=0,bQ=bN.length-1;bP<=bQ;bP++)M.get(bN,bP).ContinueWith(function(bR){bO.TrySetResult(bR);},E.noneCT());return bO.get_Task();};bu.WhenAny$1=function(bN){var bO,bP,bQ;bO=new bw.New();for(bP=0,bQ=bN.length-1;bP<=bQ;bP++)M.get(bN,bP).ContinueWith$1(function(bR){bO.TrySetResult(bR);},E.noneCT());return bO.get_Task();};bu.Delay=function(bN,bO){return E.StartAsTask(E.Sleep(bN),{$:1,$0:bO});};bu.Delay$1=function(bN){return E.StartAsTask(E.Sleep(bN),null);};bu.Run=function(bN,bO){var bP;bP=bN();return bO.c?bu.FromCanceled(bO):(bz.Equals(bP.get_Status(),0)?bP.Start():void 0,bP);};bu.Run$1=function(bN,bO){var bP;bP=new bv.New$4(bN,bO,0,null,void 0);bP.Start();return bP;};bu.Run$2=function(bN,bO){var bP;bP=bN();return bO.c?bu.FromCanceled$1(bO):(bz.Equals(bP.get_Status(),0)?bP.Start():void 0,bP);};bu.Run$3=function(bN,bO){var bP;bP=new bu.New$4(bN,bO,0,null);bP.Start();return bP;};bu.FromResult=function(bN){return new bv.New$4(null,E.noneCT(),5,null,bN);};bu.FromException=function(bN){return new bv.New$4(null,E.noneCT(),7,new _9.New$3([bN]),null);};bu.FromException$1=function(bN){return new bu.New$4(null,E.noneCT(),7,new _9.New$3([bN]));};bu.FromCanceled=function(bN){return new bv.New$4(null,bN,6,new _9.New$3([new bb.New()]),null);};bu.FromCanceled$1=function(bN){return new bu.New$4(null,bN,6,new _9.New$3([new bb.New()]));};bu.New=bG.Ctor(function(bN,bO,bP){bu.New$4.call(this,function(){return bN(bO);},bP,0,null);},bu);bu.New$1=bG.Ctor(function(bN,bO){bu.New$4.call(this,function(){return bN(bO);},E.noneCT(),0,null);},bu);bu.New$2=bG.Ctor(function(bN,bO){bu.New$4.call(this,bN,bO,0,null);},bu);bu.New$3=bG.Ctor(function(bN){bu.New$4.call(this,bN,E.noneCT(),0,null);},bu);bu.New$4=bG.Ctor(function(bN,bO,bP,bQ){j.New.call(this);this.action=bN;this.token=bO;this.status=bP;this.continuations=[];this.exc=bQ;},bu);bv=b.Task1=bG.Class({Execute:function(){this.result=this.func();},get_Result:function(){var bN;switch(this.get_Status()){case 5:return this.result;case 7:case 6:throw this.get_Exception();default:return B.InvalidOp("Task has not been completed, has no Result");}}},bu,bv);bv.New=bG.Ctor(function(bN,bO,bP){bv.New$4.call(this,function(){return bN(bO);},bP,0,null,void 0);},bv);bv.New$1=bG.Ctor(function(bN,bO){bv.New$4.call(this,function(){return bN(bO);},E.noneCT(),0,null,void 0);},bv);bv.New$2=bG.Ctor(function(bN,bO){bv.New$4.call(this,bN,bO,0,null,void 0);},bv);bv.New$3=bG.Ctor(function(bN){bv.New$4.call(this,bN,E.noneCT(),0,null,void 0);},bv);bv.New$4=bG.Ctor(function(bN,bO,bP,bQ,bR){bu.New$4.call(this,null,bO,bP,bQ);this.func=bN;this.result=bR;},bv);bw=b.TaskCompletionSource=bG.Class({TrySetResult:function(bN){return!this.task.get_IsCompleted()&&(this.task.status=5,this.task.result=bN,this.task.RunContinuations(),true);},TrySetException:function(bN){return this.TrySetException$1(new _9.New$2(bN));},TrySetException$1:function(bN){return!this.task.get_IsCompleted()&&(this.task.status=7,this.task.exc=new _9.New$3([bN]),this.task.RunContinuations(),true);},TrySetCanceled:function(bN){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.token=bN,this.task.RunContinuations(),true);},TrySetCanceled$1:function(){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.RunContinuations(),true);},SetResult:function(bN){this.task.get_IsCompleted()?B.FailWith("Task already completed."):void 0;this.task.status=5;this.task.result=bN;this.task.RunContinuations();},SetException:function(bN){this.SetException$1(new _9.New$2(bN));},SetException$1:function(bN){this.task.get_IsCompleted()?B.FailWith("Task already completed."):void 0;this.task.status=7;this.task.exc=new _9.New$3([bN]);this.task.RunContinuations();},SetCanceled:function(){this.task.get_IsCompleted()?B.FailWith("Task already completed."):void 0;this.task.status=6;this.task.RunContinuations();},get_Task:function(){return this.task;}},j,bw);bw.New=bG.Ctor(function(){j.New.call(this);this.task=new bv.New$4(null,E.noneCT(),1,null,void 0);},bw);bx=b.TaskBuilderBase=bG.Class({},j,bx);bx.New=bG.Ctor(function(){j.New.call(this);},bx);by=b.TaskBuilder=bG.Class({},bx,by);by.New=bG.Ctor(function(){bx.New.call(this);},by);bz.Hash=function(bN){var bO;bO=typeof bN;return bO=="function"?0:bO=="boolean"?bN?1:0:bO=="number"?bN:bO=="string"?bz.hashString(bN):bO=="object"?bN==null?0:bN instanceof a.Array?bz.hashArray(bN):bz.hashObject(bN):0;};bz.hashObject=function(bN){var bO,bP;if("GetHashCode"in bN)return bN.GetHashCode();else{bO=[0];for(var bQ in bN)if(function(bR){bO[0]=bz.hashMix(bz.hashMix(bO[0],bz.hashString(bR)),bz.Hash(bN[bR]));return false;}(bQ))break;return bO[0];}};bz.hashString=function(bN){var bO,bP,bQ;if(bN===null)return 0;else{bO=5381;for(bP=0,bQ=bN.length-1;bP<=bQ;bP++)bO=bz.hashMix(bO,bN[bP].charCodeAt());return bO;}};bz.hashArray=function(bN){var bO,bP,bQ;bO=-34948909;for(bP=0,bQ=M.length(bN)-1;bP<=bQ;bP++)bO=bz.hashMix(bO,bz.Hash(M.get(bN,bP)));return bO;};bz.hashMix=function(bN,bO){return(bN<<5)+bN+bO;};bz.Equals=function(bN,bO){var bP,bQ,bR,bS;if(bN===bO)return true;else{bP=typeof bN;if(bP=="object"){if(bN===null||bN===void 0||bO===null||bO===void 0||!bz.Equals(typeof bO,"object"))return false;else if("Equals"in bN)return bN.Equals(bO);else if("Equals"in bO)return false;else if(bN instanceof a.Array&&bO instanceof a.Array)return bz.arrayEquals(bN,bO);else if(bN instanceof bK&&bO instanceof bK)return bz.dateEquals(bN,bO);else{bQ=[true];for(var bT in bN)if(function(bU){bQ[0]=!bN.hasOwnProperty(bU)||bO.hasOwnProperty(bU)&&bz.Equals(bN[bU],bO[bU]);return!bQ[0];}(bT))break;if(bQ[0]){for(var bU in bO)if(function(bV){bQ[0]=!bO.hasOwnProperty(bV)||bN.hasOwnProperty(bV);return!bQ[0];}(bU))break;}return bQ[0];}}else return bP=="function"&&("$Func"in bN?bN.$Func===bO.$Func&&bN.$Target===bO.$Target:"$Invokes"in bN&&"$Invokes"in bO&&bz.arrayEquals(bN.$Invokes,bO.$Invokes));}};bz.dateEquals=function(bN,bO){return bN.getTime()===bO.getTime();};bz.arrayEquals=function(bN,bO){var bP,bQ;if(M.length(bN)===M.length(bO)){bP=true;bQ=0;while(bP&&bQ<M.length(bN)){!bz.Equals(M.get(bN,bQ),M.get(bO,bQ))?bP=false:void 0;bQ=bQ+1;}return bP;}else return false;};bz.Compare=function(bN,bO){var bP,bQ,bR,bS,bT,bU;if(bN===bO)return 0;else{bQ=typeof bN;switch(bQ=="function"?1:bQ=="boolean"?2:bQ=="number"?2:bQ=="string"?2:bQ=="object"?3:0){case 0:return typeof bO=="undefined"?0:-1;case 1:return B.FailWith("Cannot compare function values.");case 2:return bN<bO?-1:1;case 3:if(bN===null)bR=-1;else if(bO===null)bR=1;else if("CompareTo"in bN)bR=bN.CompareTo(bO);else if("CompareTo0"in bN)bR=bN.CompareTo0(bO);else if(bN instanceof a.Array&&bO instanceof a.Array)bR=bz.compareArrays(bN,bO);else if(bN instanceof bK&&bO instanceof bK)bR=bz.compareDates(bN,bO);else{bS=[0];for(var bV in bN)if(function(bW){return!bN.hasOwnProperty(bW)?false:!bO.hasOwnProperty(bW)?(bS[0]=1,true):(bS[0]=bz.Compare(bN[bW],bO[bW]),bS[0]!==0);}(bV))break;if(bS[0]===0){for(var bW in bO)if(function(bX){return!bO.hasOwnProperty(bX)?false:!bN.hasOwnProperty(bX)&&(bS[0]=-1,true);}(bW))break;}bR=bS[0];}return bR;}}};bz.compareDates=function(bN,bO){return bz.Compare(bN.getTime(),bO.getTime());};bz.compareArrays=function(bN,bO){var bP,bQ;if(M.length(bN)<M.length(bO))return -1;else if(M.length(bN)>M.length(bO))return 1;else{bP=0;bQ=0;while(bP===0&&bQ<M.length(bN)){bP=bz.Compare(M.get(bN,bQ),M.get(bO,bQ));bQ=bQ+1;}return bP;}};bD.ValueNone={$:0};bD.get_Value=function(bN){return bN.$==1?bN.$0:B.InvalidOp("ValueOption.Value");};bE.filter=function(bN,bO){var bP;return bO.$==1&&bN(bO.$0)?bO:bD.ValueNone;};bE.fold=function(bN,bO,bP){return bP.$==0?bO:bN(bO,bP.$0);};bE.foldBack=function(bN,bO,bP){return bO.$==0?bP:bN(bO.$0,bP);};bE.ofNullable=function(bN){return bN==null?bD.ValueNone:{$:1,$0:C.get(bN)};};bE.ofObj=function(bN){return bN==null?bD.ValueNone:{$:1,$0:bN};};bE.toArray=function(bN){return bN.$==0?[]:[bN.$0];};bE.toList=function(bN){return bN.$==0?bk.Empty:O.ofArray([bN.$0]);};bE.toNullable=function(bN){return bN.$==1?bN.$0:null;};bE.toObj=function(bN){return bN.$==0?null:bN.$0;};bF.TryParseBool=function(bN,bO){var bP;bP=bN.toLowerCase();return bP==="true"?(bO.set(true),true):bP==="false"&&(bO.set(false),true);};bF.ParseBool=function(bN){var bO;bO=bN.toLowerCase();if(bO==="true")return true;else if(bO==="false")return false;else throw new $.New$1("String was not recognized as a valid Boolean.");};bF.TryParse=function(bN,bO,bP,bQ){var bR,bS;bR=+bN;bS=bR===bR-bR%1&&bR>=bO&&bR<=bP;if(bS)bQ.set(bR);return bS;};bF.Parse=function(bN,bO,bP,bQ){var bR;bR=+bN;if(bR!==bR-bR%1)throw new $.New$1("Input string was not in a correct format.");else if(bR<bO||bR>bP)throw new ba.New$1(bQ);else return bR;};bF.ParseByte=function(bN){return bF.Parse(bN,0,255,"Value was either too large or too small for an unsigned byte.");};bF.TryParseByte=function(bN,bO){return bF.TryParse(bN,0,255,bO);};bF.ParseSByte=function(bN){return bF.Parse(bN,-128,127,"Value was either too large or too small for a signed byte.");};bF.TryParseSByte=function(bN,bO){return bF.TryParse(bN,-128,127,bO);};bF.ParseInt16=function(bN){return bF.Parse(bN,-32768,32767,"Value was either too large or too small for an Int16.");};bF.TryParseInt16=function(bN,bO){return bF.TryParse(bN,-32768,32767,bO);};bF.ParseInt32=function(bN){return bF.Parse(bN,-2147483648,2147483647,"Value was either too large or too small for an Int32.");};bF.TryParseInt32=function(bN,bO){return bF.TryParse(bN,-2147483648,2147483647,bO);};bF.ParseUInt16=function(bN){return bF.Parse(bN,0,65535,"Value was either too large or too small for an UInt16.");};bF.TryParseUInt16=function(bN,bO){return bF.TryParse(bN,0,65535,bO);};bF.ParseUInt32=function(bN){return bF.Parse(bN,0,4294967295,"Value was either too large or too small for an UInt32.");};bF.TryParseUInt32=function(bN,bO){return bF.TryParse(bN,0,4294967295,bO);};bF.ParseInt64=function(bN){return bF.Parse(bN,-9223372036854775808,9223372036854775807,"Value was either too large or too small for an Int64.");};bF.TryParseInt64=function(bN,bO){return bF.TryParse(bN,-9223372036854775808,9223372036854775807,bO);};bF.ParseUInt64=function(bN){return bF.Parse(bN,0,18446744073709551615,"Value was either too large or too small for an UInt64.");};bF.TryParseUInt64=function(bN,bO){return bF.TryParse(bN,0,18446744073709551615,bO);};}(self));
